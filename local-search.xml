<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>java作业</title>
    <link href="/2022/12/01/java%E4%BD%9C%E4%B8%9A%E7%8E%8B%E4%BD%B3%E6%97%AD/"/>
    <url>/2022/12/01/java%E4%BD%9C%E4%B8%9A%E7%8E%8B%E4%BD%B3%E6%97%AD/</url>
    
    <content type="html"><![CDATA[<h1 id="java作业王佳旭"><a href="#java作业王佳旭" class="headerlink" title="java作业王佳旭"></a>java作业王佳旭</h1><h2 id="一、重写动物园"><a href="#一、重写动物园" class="headerlink" title="一、重写动物园"></a>一、重写动物园</h2><h3 id="控制台代码重写"><a href="#控制台代码重写" class="headerlink" title="控制台代码重写"></a>控制台代码重写</h3><blockquote><p>原来的动物园程序不能支持从键盘输入任意动物，不能连续输入，动物园中也只有Cat、Pig两种动物。</p><p>所以首先我改造了主函数，引入Scanner，利用while循环不断监测输入的字符，当输入字符等于exit时退出。</p></blockquote><p>​    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String arg[])</span> &#123;<br>        <span class="hljs-comment">//创建工厂</span><br>        Factory f;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">word</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        System.out.println(<span class="hljs-string">&quot;请输入要添加的动物或者输入exit以退出输入：&quot;</span>);<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);     <br>            word = sc.next();<br>            <span class="hljs-keyword">if</span>(word.equals(<span class="hljs-string">&quot;exit&quot;</span>))<br>            &#123;<br>                System.out.println(<span class="hljs-string">&quot;退出输入!&quot;</span>);<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            <span class="hljs-keyword">else</span>&#123;<br>                <span class="hljs-keyword">switch</span> (word) &#123;<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;Cat&quot;</span>:<br>                        f = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CatFactory</span>();<br>                        <span class="hljs-type">Animal</span> <span class="hljs-variable">a1</span> <span class="hljs-operator">=</span> f.create();<br>                        System.out.println(a1.getInfo());<br>                        <span class="hljs-keyword">break</span>;<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;Pig&quot;</span>:<br>                        f = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PigFactory</span>();<br>                        <span class="hljs-type">Animal</span> <span class="hljs-variable">a2</span> <span class="hljs-operator">=</span> f.create();<br>                        System.out.println(a2.getInfo());<br>                        <span class="hljs-keyword">break</span>;<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;Duck&quot;</span>:<br>                        f = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DuckFactory</span>();<br>                        <span class="hljs-type">Animal</span> <span class="hljs-variable">a3</span> <span class="hljs-operator">=</span> f.create();<br>                        System.out.println(a3.getInfo());<br>                        <span class="hljs-keyword">break</span>;<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;Dog&quot;</span>:<br>                        f = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DogFactory</span>();<br>                        <span class="hljs-type">Animal</span> <span class="hljs-variable">a4</span> <span class="hljs-operator">=</span> f.create();<br>                        System.out.println(a4.getInfo());<br>                        <span class="hljs-keyword">break</span>;<br>                    <span class="hljs-keyword">default</span>:<br>                        System.out.println(<span class="hljs-string">&quot;该动物园无该物种，请检查输入！&quot;</span>);<br>                &#125;<br>            &#125; <br>        &#125;<br><br>    &#125;<br></code></pre></td></tr></table></figure><blockquote><p>采用工厂方法模式为该系统提供拓展性，添加新的动物只需要添加它的工厂类和继承自Animal的本身类的代码即可。例如动物园需要添加狗和鸭子两个新物种，只需要添加DogFactory、DuckFactory和两个子类。</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 添加新物种</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DogFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Factory</span> &#123;<br>    <span class="hljs-keyword">public</span> Animal <span class="hljs-title function_">create</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<span class="hljs-comment">// 所有狗的全局变量</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Dog</span><span class="hljs-params">()</span> &#123;<br>        count++;<br>        id = count;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getInfo</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;我是第&quot;</span> + id + <span class="hljs-string">&quot;只狗,一共生成了&quot;</span> + getSum() + <span class="hljs-string">&quot;只动物&quot;</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DuckFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Factory</span> &#123;<br>    <span class="hljs-keyword">public</span> Animal <span class="hljs-title function_">create</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Duck</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Duck</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<span class="hljs-comment">// 所有鸭子的全局变量</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Duck</span><span class="hljs-params">()</span> &#123;<br>        count++;<br>        id = count;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getInfo</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;我是第&quot;</span> + id + <span class="hljs-string">&quot;只鸭子,一共生成了&quot;</span> + getSum() + <span class="hljs-string">&quot;只动物&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>此时在控制台可实现如下结果</p></blockquote><p><img src="C:\Users\wjx\AppData\Roaming\Typora\typora-user-images\image-20221130142142623.png" alt="image-20221130142142623"></p><blockquote><p>控制台全部代码如下：</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> zoo;<br><br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FactoryMethodDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String arg[])</span> &#123;<br>        <span class="hljs-comment">// 创建工厂</span><br>        Factory f;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">word</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        System.out.println(<span class="hljs-string">&quot;请输入要添加的动物或者输入exit以退出输入：&quot;</span>);<br>        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>            <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>            word = sc.next();<br>            <span class="hljs-keyword">if</span> (word.equals(<span class="hljs-string">&quot;exit&quot;</span>)) &#123;<br>                System.out.println(<span class="hljs-string">&quot;退出输入!&quot;</span>);<br>                <span class="hljs-keyword">break</span>;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">switch</span> (word) &#123;<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;Cat&quot;</span>:<br>                        f = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CatFactory</span>();<br>                        <span class="hljs-type">Animal</span> <span class="hljs-variable">a1</span> <span class="hljs-operator">=</span> f.create();<br>                        System.out.println(a1.getInfo());<br>                        <span class="hljs-keyword">break</span>;<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;Pig&quot;</span>:<br>                        f = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PigFactory</span>();<br>                        <span class="hljs-type">Animal</span> <span class="hljs-variable">a2</span> <span class="hljs-operator">=</span> f.create();<br>                        System.out.println(a2.getInfo());<br>                        <span class="hljs-keyword">break</span>;<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;Duck&quot;</span>:<br>                        f = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DuckFactory</span>();<br>                        <span class="hljs-type">Animal</span> <span class="hljs-variable">a3</span> <span class="hljs-operator">=</span> f.create();<br>                        System.out.println(a3.getInfo());<br>                        <span class="hljs-keyword">break</span>;<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;Dog&quot;</span>:<br>                        f = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DogFactory</span>();<br>                        <span class="hljs-type">Animal</span> <span class="hljs-variable">a4</span> <span class="hljs-operator">=</span> f.create();<br>                        System.out.println(a4.getInfo());<br>                        <span class="hljs-keyword">break</span>;<br>                    <span class="hljs-keyword">default</span>:<br>                        System.out.println(<span class="hljs-string">&quot;该动物园无该物种，请检查输入！&quot;</span>);<br>                &#125;<br>            &#125;<br>        &#125;<br><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<span class="hljs-comment">// 所有动物的全局变量</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Animal</span><span class="hljs-params">()</span> &#123;<br>        sum++;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getSum</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> sum;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> String <span class="hljs-title function_">getInfo</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<span class="hljs-comment">// 所有猫的全局变量</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Cat</span><span class="hljs-params">()</span> &#123;<br>        count++;<br>        id = count;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getInfo</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;我是第&quot;</span> + id + <span class="hljs-string">&quot;只猫，一共生成了&quot;</span> + getSum() + <span class="hljs-string">&quot;只动物&quot;</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Pig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<span class="hljs-comment">// 所有猪的全局变量</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Pig</span><span class="hljs-params">()</span> &#123;<br>        count++;<br>        id = count;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getInfo</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;我是第&quot;</span> + id + <span class="hljs-string">&quot;只猪，一共生成了&quot;</span> + getSum() + <span class="hljs-string">&quot;只动物&quot;</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Factory</span> &#123;<span class="hljs-comment">// 抽象工厂接口</span><br>    <span class="hljs-keyword">public</span> Animal <span class="hljs-title function_">create</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CatFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Factory</span> &#123;<br>    <span class="hljs-keyword">public</span> Animal <span class="hljs-title function_">create</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PigFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Factory</span> &#123;<br>    <span class="hljs-keyword">public</span> Animal <span class="hljs-title function_">create</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Pig</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 添加新物种</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DogFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Factory</span> &#123;<br>    <span class="hljs-keyword">public</span> Animal <span class="hljs-title function_">create</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<span class="hljs-comment">// 所有狗的全局变量</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Dog</span><span class="hljs-params">()</span> &#123;<br>        count++;<br>        id = count;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getInfo</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;我是第&quot;</span> + id + <span class="hljs-string">&quot;只狗,一共生成了&quot;</span> + getSum() + <span class="hljs-string">&quot;只动物&quot;</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DuckFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Factory</span> &#123;<br>    <span class="hljs-keyword">public</span> Animal <span class="hljs-title function_">create</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Duck</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Duck</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<span class="hljs-comment">// 所有鸭子的全局变量</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> id;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Duck</span><span class="hljs-params">()</span> &#123;<br>        count++;<br>        id = count;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getInfo</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;我是第&quot;</span> + id + <span class="hljs-string">&quot;只鸭子,一共生成了&quot;</span> + getSum() + <span class="hljs-string">&quot;只动物&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>在此基础上添加一个图形界面可以帮助我们更好地操作，所以下面利用awt和swing设置了一个简单的图形界面。</p></blockquote><h3 id="AWT图形界面编写"><a href="#AWT图形界面编写" class="headerlink" title="AWT图形界面编写"></a>AWT图形界面编写</h3><blockquote><p>添加了一个下拉框组件、一个按钮组件，一个文本组件（用来展示图片），设计了button的监听函数，通过格网布局进行展示。</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> zoo;<br><br><span class="hljs-keyword">import</span> java.awt.*;<br><span class="hljs-keyword">import</span> java.awt.event.*;<br><span class="hljs-keyword">import</span> javax.swing.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">awt</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// 创建窗口</span><br>        <span class="hljs-type">Frame</span> <span class="hljs-variable">frame</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Frame</span>(<span class="hljs-string">&quot;~welcome to zoo~&quot;</span>);<br>        <span class="hljs-comment">// 创建下拉框组件</span><br>        <span class="hljs-type">Choice</span> <span class="hljs-variable">names</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Choice</span>();<br>        names.add(<span class="hljs-string">&quot;Cat&quot;</span>);<br>        names.add(<span class="hljs-string">&quot;Pig&quot;</span>);<br>        names.add(<span class="hljs-string">&quot;Dog&quot;</span>);<br>        names.add(<span class="hljs-string">&quot;Duck&quot;</span>);<br>        <span class="hljs-comment">// 创建两个个容器</span><br>        <span class="hljs-type">JPanel</span> <span class="hljs-variable">panel1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JPanel</span>();<br>        panel1.setSize(<span class="hljs-number">300</span>,<span class="hljs-number">400</span>);<br>        <span class="hljs-type">JPanel</span> <span class="hljs-variable">panel2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JPanel</span>();<br>        panel2.setSize(<span class="hljs-number">300</span>,<span class="hljs-number">400</span>);<br>        <span class="hljs-comment">//创建一个文本框，后续通过设置图标的方法讨巧地伪加载图片</span><br>        <span class="hljs-type">JLabel</span> <span class="hljs-variable">label</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JLabel</span>();<br>        <span class="hljs-comment">//创建添加按钮</span><br>        <span class="hljs-type">Button</span> <span class="hljs-variable">button1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Button</span>(<span class="hljs-string">&quot;Add&quot;</span>);<br>        <span class="hljs-comment">//对button的监听</span><br>        button1.addActionListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ActionListener</span>() &#123;<br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">actionPerformed</span><span class="hljs-params">(ActionEvent e)</span> &#123;<br>                <span class="hljs-comment">//获取下拉框选择的项目</span><br>                <span class="hljs-type">String</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> names.getItem(names.getSelectedIndex());<br>                Factory f;<br>                <span class="hljs-keyword">if</span> (a == <span class="hljs-string">&quot;Cat&quot;</span>) &#123;<br>                    <span class="hljs-comment">//创建猫猫工厂</span><br>                    f = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CatFactory</span>();<br>                    <span class="hljs-comment">//创建猫猫</span><br>                    <span class="hljs-type">Animal</span> <span class="hljs-variable">a1</span> <span class="hljs-operator">=</span> f.create();<br>                    <span class="hljs-comment">//设置文本框不可见，这里是为了动态刷新图片</span><br>                    label.setVisible(<span class="hljs-literal">false</span>);<br>                    <span class="hljs-comment">//设置文本的图标，讨巧地加载了图片</span><br>                    label.setIcon(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageIcon</span>(<span class="hljs-string">&quot;D:\\java第二次作业\\cat.png&quot;</span>));<br>                    <span class="hljs-comment">//加载到panel1中</span><br>                    panel1.add(label);<br>                    <span class="hljs-comment">//重新加载图片</span><br>                    label.setVisible(<span class="hljs-literal">true</span>);<br>                    <span class="hljs-comment">// 获取打印信息，并以对话框形式显示</span><br>                    <span class="hljs-type">String</span> <span class="hljs-variable">str1</span> <span class="hljs-operator">=</span> a1.getInfo();<br>                    JOptionPane.showMessageDialog(<span class="hljs-literal">null</span>, str1);<br>                    <span class="hljs-comment">// 系统打印</span><br>                    System.out.println(a1.getInfo());<br>                &#125;<br>                <span class="hljs-keyword">if</span> (a == <span class="hljs-string">&quot;Pig&quot;</span>) &#123;<br>                    f = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PigFactory</span>();<br>                    <span class="hljs-type">Animal</span> <span class="hljs-variable">a2</span> <span class="hljs-operator">=</span> f.create();<br>                    label.setVisible(<span class="hljs-literal">false</span>);<br>                    label.setIcon(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageIcon</span>(<span class="hljs-string">&quot;D:\\java第二次作业\\pig.png&quot;</span>));<br>                    panel1.add(label);<br>                    label.setVisible(<span class="hljs-literal">true</span>);<br>                    <span class="hljs-type">String</span> <span class="hljs-variable">str2</span> <span class="hljs-operator">=</span> a2.getInfo();<br>                    JOptionPane.showMessageDialog(<span class="hljs-literal">null</span>, str2);<br>                    System.out.println(a2.getInfo());<br>                &#125;<br>                <span class="hljs-keyword">if</span> (a == <span class="hljs-string">&quot;Duck&quot;</span>) &#123;<br>                    f = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DuckFactory</span>();<br>                    <span class="hljs-type">Animal</span> <span class="hljs-variable">a3</span> <span class="hljs-operator">=</span> f.create();<br>                    label.setVisible(<span class="hljs-literal">false</span>);<br>                    label.setIcon(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageIcon</span>(<span class="hljs-string">&quot;D:\\java第二次作业\\duck.png&quot;</span>));<br>                    panel1.add(label);<br>                    label.setVisible(<span class="hljs-literal">true</span>);<br>                    <span class="hljs-type">String</span> <span class="hljs-variable">str3</span> <span class="hljs-operator">=</span> a3.getInfo();<br>                    JOptionPane.showMessageDialog(<span class="hljs-literal">null</span>, str3);<br>                    System.out.println(a3.getInfo());<br>                &#125;<br>                <span class="hljs-keyword">if</span> (a == <span class="hljs-string">&quot;Dog&quot;</span>) &#123;<br>                    f = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DogFactory</span>();<br>                    <span class="hljs-type">Animal</span> <span class="hljs-variable">a4</span> <span class="hljs-operator">=</span> f.create();<br>                    label.setVisible(<span class="hljs-literal">false</span>);<br>                    label.setIcon(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageIcon</span>(<span class="hljs-string">&quot;D:\\java第二次作业\\dog.png&quot;</span>));<br>                    panel1.add(label);<br>                    label.setVisible(<span class="hljs-literal">true</span>);<br>                    <span class="hljs-type">String</span> <span class="hljs-variable">str4</span> <span class="hljs-operator">=</span> a4.getInfo();<br>                    JOptionPane.showMessageDialog(<span class="hljs-literal">null</span>, str4);<br>                    System.out.println(a4.getInfo());<br>                &#125;<br>            &#125;<br>        &#125;);<br>        <span class="hljs-comment">// 设置WindowListener，监听用户点击关闭按钮的动作</span><br>        frame.addWindowListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WindowAdapter</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">windowClosing</span><span class="hljs-params">(WindowEvent e)</span> &#123;<br>                System.exit(<span class="hljs-number">0</span>);<br>            &#125;<br>        &#125;);<br>        <span class="hljs-comment">//布局和加载</span><br>        <span class="hljs-comment">//设置一个一行二列的布局</span><br>        frame.setLayout(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GridLayout</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>));<br>        <span class="hljs-comment">//设置窗口出现的位置为屏幕中心</span><br>        frame.setLocationRelativeTo(<span class="hljs-literal">null</span>);<br>        <span class="hljs-comment">//设置窗口大小</span><br>        frame.setSize(<span class="hljs-number">600</span>,<span class="hljs-number">400</span>);<br>        <span class="hljs-comment">//添加组件</span><br>        panel2.add(names);<br>        panel2.add(button1);<br>        frame.add(panel1);<br>        frame.add(panel2);<br>        <span class="hljs-comment">//设置可视</span><br>        frame.setVisible(<span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure><blockquote><p>实现的效果为：</p></blockquote><p><img src="C:\Users\wjx\AppData\Roaming\Typora\typora-user-images\image-20221130142726135.png" alt="image-20221130142726135"></p><p><img src="C:\Users\wjx\AppData\Roaming\Typora\typora-user-images\image-20221130142804778.png" alt="image-20221130142804778"></p><p><img src="C:\Users\wjx\AppData\Roaming\Typora\typora-user-images\image-20221130143128127.png" alt="image-20221130143128127"></p><h2 id="读程序，写结果"><a href="#读程序，写结果" class="headerlink" title="读程序，写结果"></a>读程序，写结果</h2><h3 id="1"><a href="#1" class="headerlink" title="1"></a>1</h3><h4 id="程序："><a href="#程序：" class="headerlink" title="程序："></a>程序：</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">Show</span><span class="hljs-params">(D obj)</span> &#123;<span class="hljs-keyword">return</span> (<span class="hljs-string">&quot;A and D&quot;</span>);&#125;<br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">Show</span><span class="hljs-params">(A obj)</span> &#123;<span class="hljs-keyword">return</span> (<span class="hljs-string">&quot;A and A&quot;</span>);&#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">A</span> &#123;<br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">Show</span><span class="hljs-params">(B obj)</span> &#123;<span class="hljs-keyword">return</span> (<span class="hljs-string">&quot;B and B&quot;</span>);&#125;<br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">Show</span><span class="hljs-params">(A obj)</span> &#123;<span class="hljs-keyword">return</span> (<span class="hljs-string">&quot;B and A&quot;</span>);&#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">B</span> &#123;<br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">Show</span><span class="hljs-params">(C obj)</span> &#123;<span class="hljs-keyword">return</span> (<span class="hljs-string">&quot;C and C&quot;</span>);&#125;<br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">Show</span><span class="hljs-params">(B obj)</span> &#123;<span class="hljs-keyword">return</span> (<span class="hljs-string">&quot;C and B&quot;</span>);&#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">D</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">B</span> &#123;<br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">Show</span><span class="hljs-params">(D obj)</span> &#123;<span class="hljs-keyword">return</span> (<span class="hljs-string">&quot;D and D&quot;</span>);&#125;<br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">Show</span><span class="hljs-params">(B obj)</span> &#123;<span class="hljs-keyword">return</span> (<span class="hljs-string">&quot;D and B&quot;</span>);&#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">mainTest</span> &#123;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String args[])</span>&#123;<br><span class="hljs-type">A</span> <span class="hljs-variable">a1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>();<br><span class="hljs-type">A</span> <span class="hljs-variable">a2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>();<br><span class="hljs-type">B</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>();<br><span class="hljs-type">C</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">C</span>();<br><span class="hljs-type">D</span> <span class="hljs-variable">d</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">D</span>();<br>        System.out.println(a1.Show(b));<br>        System.out.println(a1.Show(c));<br>System.out.println(a1.Show(d));<br>System.out.println(a2.Show(b));<br>System.out.println(a2.Show(c));<br>System.out.println(a2.Show(d));<br>System.out.println(b.Show(b));<br>System.out.println(b.Show(c));<br>System.out.println(b.Show(d));<br>&#125;&#125;<br></code></pre></td></tr></table></figure><h4 id="结果："><a href="#结果：" class="headerlink" title="结果："></a>结果：</h4><p>A and A</p><p>A and A</p><p>A and D</p><p>B and A</p><p>B and A</p><p>A and D</p><p>B and B</p><p>B and B</p><p>A and D</p><h4 id="分析："><a href="#分析：" class="headerlink" title="分析："></a>分析：</h4><p>​    我们可以用<strong>方法调用的优先级</strong>来辅助解释上面的结果。<br>​    优先级由高到低依次为：一级调度this.show(O)、二级调度super.show(O)、三级调度this.show((super)O)、四级调度super.show((super)O)【O是传入参数的类型】</p><h5 id="1解释"><a href="#1解释" class="headerlink" title="1解释"></a>1解释</h5><blockquote><p>引用类型为A，从A类中找，没有找到b参数类型的方法，B类继承A类，b类型为a类型，即调用a1.Show（A obj）</p></blockquote><p>​    a1引用变量，类型为A，指向A类，（一级调度）调用a1.show(b)，这个方法传入传输参数为b，类型为B，a1到A类中找这个参数类型的方法，发现A类中没有匹配的参数类型。（二级调度）于是这个a1又去A类中的父类中去找，结果A类没有父类（Object除外）。（三级调度）于是这个a1.show((super)B)其中（super）B相当于A，这个参数类型变成A类型了，转之a1又去调用A类中参数类型为A的方法，所以结果就为”A and A”</p><h5 id="2解释"><a href="#2解释" class="headerlink" title="2解释"></a>2解释</h5><blockquote><p>引用类型为A，从A类中找，没有找到c参数类型的方法，而类C继承于B，类B继承于A，c类型可转换为类型，即调用a1.Show（A obj）</p></blockquote><p>​    与1.原理相同</p><h5 id="3解释"><a href="#3解释" class="headerlink" title="3解释"></a>3解释</h5><blockquote><p>引用类型为A，从A类中找，绝对调用a1.Show(D obj)</p></blockquote><p>a1引用变量，类型为A，指向A类，（一级调度）调用a1.show(d)，这个方法</p><p>传入传输参数为d，类型为D，a1到A类中找这个参数类型的方法，执行public String Show(D obj) {return (“A and D”);    }</p><h5 id="4解释"><a href="#4解释" class="headerlink" title="4解释"></a>4解释</h5><blockquote><p>引用类型为A，从A类中找，编译时执行public String Show(A obj) {    return (“A and A”);    }，动态链编，运行时执行子类B中重写的public String Show(A obj) {    return (“B and A”);    }</p></blockquote><p>​    由于方法重写，遇到同名函数要执行子类的函数。a2.show(b)，a2是一个引用变量，类型为A，则this为a2，b是B的一个实例，于是它到类A里面找show(B obj)方法，没有找到，于是到A的super(超类)找，而A没有超类，因此转到第三优先级this.show((super)O)，this仍然是a2，这里O为B，(super)O即(super)B即A，因此它到类A里面找show(A obj)的方法，类A有这个方法，但是由于a2引用的是类B的一个对象，B覆盖了A的show(A obj)方法，因此最终锁定到类B的show(A obj)，输出为”B and A”。</p><h5 id="5解释"><a href="#5解释" class="headerlink" title="5解释"></a>5解释</h5><blockquote><p>与4相同，注意A a2 = new B();，即注意动态链编</p></blockquote><p>​    解释：与4.相同</p><h5 id="6解释"><a href="#6解释" class="headerlink" title="6解释"></a>6解释</h5><blockquote><p>引用类型为A，从A类中找，执行public String Show(D obj) {    return (“A and D”);    }</p></blockquote><p>​    a2.show(d)，a2是一个引用变量，类型为A，则this为a2，d是D的一个实例，于是它到类A里面找show(D obj)方法，输出”A and D”。</p><h5 id="7解释"><a href="#7解释" class="headerlink" title="7解释"></a>7解释</h5><blockquote><p>引用类型为B，从B类中调用public String Show(B obj) {    return (“B and B”);    }</p></blockquote><p>​    b.show(b)，b是一个引用变量，类型为B，则this为b，b是B的一个实例，于是它到类B里面找show(B obj)方法，所以输出”B and B”。</p><h5 id="8解释"><a href="#8解释" class="headerlink" title="8解释"></a>8解释</h5><blockquote><p>相较A类型，C类型更接近B类型，即调用public String Show(B obj) {    return (“B and B”);    }</p></blockquote><p>​    b.show(c)，b是一个引用变量，类型为B，则this为b，c是C的一个实例，于是它到类B里面找show(C obj)方法，没有找到。于是到B的super超类即A中找，没有找到。于是转到第三优先级this.show((super)O)，this仍然是b，这里O为C，(super)O即(super)C即B，因此它到类A里面找show(B obj)的方法，所以输出”B and B”。</p><h5 id="9解释"><a href="#9解释" class="headerlink" title="9解释"></a>9解释</h5><blockquote><p>B类继承A类的方法public String Show(D obj) {    return (“A and D”);    }，直接调用</p></blockquote><p>​    b.show(d)，b是一个引用变量，类型为B，则this为b，d是D的一个实例，于是它到类B里面找show(D obj)方法，没有找到。于是到B的super超类即A中找，输出”A and D”。</p><h3 id="2"><a href="#2" class="headerlink" title="2"></a>2</h3><h4 id="程序"><a href="#程序" class="headerlink" title="程序"></a>程序</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Father</span> &#123;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">Show</span><span class="hljs-params">(Father obj)</span><br> &#123;System.out.println(<span class="hljs-string">&quot;in Father.show-Father &quot;</span>);&#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Father</span> &#123;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">Show</span><span class="hljs-params">(Son obj)</span> &#123;System.out.println(<span class="hljs-string">&quot;in Son.show-Son &quot;</span>);&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">Show</span><span class="hljs-params">(Father obj)</span> &#123;System.out.println(<span class="hljs-string">&quot;in Son.show-Father&quot;</span>);&#125;<br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">Show</span><span class="hljs-params">(GrandSon obj)</span> &#123;System.out.println(<span class="hljs-string">&quot;in Son.show-GrandSon&quot;</span>);&#125;<br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GrandSon</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Son</span> &#123;    &#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">mainTest1</span> &#123;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String args[])</span>&#123;<br><span class="hljs-type">Father</span> <span class="hljs-variable">f2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Son</span>();<br><span class="hljs-type">GrandSon</span> <span class="hljs-variable">gs1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GrandSon</span>();<br>f2.Show(gs1); <br>              <span class="hljs-comment">//引用类型确定函数，然后动态链编这个函数</span><br>&#125;&#125;<br></code></pre></td></tr></table></figure><h4 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h4><p>in Son.show-Father</p><h4 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h4><blockquote><p>由Father f2 = new Son();需要注意动态链编问题，f2类型为Father，从Father中找方法，GrandSon继承于Son，Son继承于Father，GrandSon转换为Father类型，即编译时执行public void Show(Father obj) {System.out.println(“in Father.show-Father “);}运行时动态链编，执行public void Show(Father obj) {System.out.println(“in Son.show-Father”);}</p></blockquote><h3 id="3"><a href="#3" class="headerlink" title="3"></a>3</h3><h4 id="程序-1"><a href="#程序-1" class="headerlink" title="程序"></a>程序</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">superc</span>&#123;<br>  <span class="hljs-type">int</span> i=<span class="hljs-number">5</span>;<br>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span>&#123;<br>   System.out.println(<span class="hljs-string">&quot;the i is :&quot;</span>+i);  &#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">subc</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">superc</span>&#123;<br>  <span class="hljs-type">int</span> i=<span class="hljs-number">6</span>;<br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] arg)</span><br>   &#123; subc s=<span class="hljs-keyword">new</span> <span class="hljs-title class_">subc</span>();<br>     System.out.println(s.i);<br>     s.show();  <span class="hljs-comment">//父类域中的show</span><br>&#125;  &#125;<br></code></pre></td></tr></table></figure><h4 id="结果-1"><a href="#结果-1" class="headerlink" title="结果"></a>结果</h4><p>6</p><p>the i is :5</p><h4 id="分析-1"><a href="#分析-1" class="headerlink" title="分析"></a>分析</h4><blockquote><p>System.out.println(s.i);//调用成员变量，在这里是静态绑定，故找subc中的i值，即为6</p><p>s.show();  //这里用的是动态绑定，子类中没有show()方法，所以调用父类中的show()方法，由就近原则i值为5</p></blockquote><h3 id="4"><a href="#4" class="headerlink" title="4"></a>4</h3><h4 id="程序-2"><a href="#程序-2" class="headerlink" title="程序"></a>程序</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> &#123; <br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;base&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Base</span><span class="hljs-params">()</span> &#123;<br>        tellName();&#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">tellName</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Base tell name: &quot;</span> + name); &#125;  <br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dervied</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Base</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;dervied&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Dervied</span><span class="hljs-params">()</span> &#123;<br>        tellName();&#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">tellName</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Dervied tell name: &quot;</span> + name);&#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>&#123;<br>        <br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dervied</span>();    <br>    &#125;&#125;<br></code></pre></td></tr></table></figure><h4 id="结果-2"><a href="#结果-2" class="headerlink" title="结果"></a>结果</h4><p>Dervied tell name: null</p><p>Dervied tell name: dervied</p><h4 id="分析-2"><a href="#分析-2" class="headerlink" title="分析"></a>分析</h4><blockquote><p>对象的初始化过程是：先执行父类的构造方法，再执行子类的拓展数据，再进行子类的余下操作。</p><p>首先我们new Dervied()，Dervied.<init>首先会调用到Base.<init>方法，所以现在我们调用的方法是Base.<init>，Base.<init>方法中，首先是对name域（父类Base）进行初始化，然后调用tellName()方法，因为子类以及覆写了tellName()方法，所以tellName方法实际调用为Dervied.tellName()方法，tellName方法要打印name域（子类Dervied）的值，但是当前Dervied对象中的name域还没有被初始化，所以打印出来的值为null。故输出Dervied tell name: null。</p><p>Base.<init>方法返回到Dervied.<init>方法中，紧接着对name域（子类Dervied）进行初始化操作，然后调用子类Dervied的tellName方法，name域（子类Dervied）已经初始化完成，所以能正确打印出来。故输出Dervied tell name: dervied。</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>作业</category>
      
    </categories>
    
    
    <tags>
      
      <tag>java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>空气污染和噪声研究</title>
    <link href="/2022/09/14/%E7%A9%BA%E6%B0%94%E6%B1%A1%E6%9F%93%E5%92%8C%E5%99%AA%E5%A3%B0/"/>
    <url>/2022/09/14/%E7%A9%BA%E6%B0%94%E6%B1%A1%E6%9F%93%E5%92%8C%E5%99%AA%E5%A3%B0/</url>
    
    <content type="html"><![CDATA[<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Name</span>    :   空气污染和噪声污染研究-为了生活在更好的环境中</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Time</span>    :   2022/9/30</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Author</span>  :   王佳旭</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Version</span> :   1.0</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@E</span>-mail  :   2687627484<span class="hljs-doctag">@qq</span>.com</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Source</span>  :   中国矿业大学环境与测绘学院地理信息科学20-1班</span><br><span class="hljs-comment"> */</span><br><span class="hljs-comment">//全局变量</span><br><span class="hljs-keyword">var</span> selectTag1=<span class="hljs-string">&quot;空气质量&quot;</span>;<span class="hljs-comment">//默认选择</span><br><span class="hljs-keyword">var</span> layerKey=<span class="hljs-literal">null</span>;<span class="hljs-comment">//控制图层更换</span><br><span class="hljs-keyword">var</span> studyArea=<span class="hljs-literal">null</span>;<span class="hljs-comment">//研究区域</span><br><span class="hljs-keyword">var</span> selectregion=<span class="hljs-string">&quot;sheng&quot;</span>;<span class="hljs-comment">//默认地区</span><br><span class="hljs-keyword">var</span> selectCode = <span class="hljs-string">&quot;130403&quot;</span>; <span class="hljs-comment">//默认区域</span><br><span class="hljs-keyword">var</span> selectName=<span class="hljs-string">&quot;河北省&quot;</span>;<br><span class="hljs-keyword">var</span> studyLayer=<span class="hljs-literal">null</span>;<span class="hljs-comment">//研究区域的更换</span><br><span class="hljs-keyword">var</span> zoom=<span class="hljs-number">7</span>;<span class="hljs-comment">//默认缩放等级</span><br><span class="hljs-comment">//引用</span><br><span class="hljs-keyword">var</span> county=pie.<span class="hljs-title function_ invoke__">FeatureCollection</span>(<span class="hljs-string">&quot;NGCC/CHINA_COUNTY_BOUNDARY&quot;</span>);<br><span class="hljs-keyword">var</span> province=pie.<span class="hljs-title function_ invoke__">FeatureCollection</span>(<span class="hljs-string">&quot;NGCC/CHINA_PROVINCE_BOUNDARY&quot;</span>);<br><span class="hljs-keyword">var</span> city=pie.<span class="hljs-title function_ invoke__">FeatureCollection</span>(<span class="hljs-string">&quot;NGCC/CHINA_CITY_BOUNDARY&quot;</span>);<br><span class="hljs-comment">//逻辑部分</span><br><span class="hljs-comment">//得到研究区域-邯郸市</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getstudyArea</span>(<span class="hljs-params">selectCode,selectregion</span>)</span>&#123;<br><br>    <span class="hljs-keyword">if</span>(studyLayer!=<span class="hljs-literal">null</span>)&#123;        <br>        Map.<span class="hljs-title function_ invoke__">removeLayer</span>(studyLayer);<br>    &#125;<br>     <span class="hljs-keyword">if</span>(selectregion===<span class="hljs-string">&quot;sheng&quot;</span>)&#123;      <br>        studyArea=province.<span class="hljs-title function_ invoke__">filter</span>(pie.Filter.<span class="hljs-title function_ invoke__">eq</span>(<span class="hljs-string">&quot;code&quot;</span>,<span class="hljs-title function_ invoke__">parseInt</span>(selectCode)))<br>        .<span class="hljs-title function_ invoke__">first</span>()<br>        .<span class="hljs-title function_ invoke__">geometry</span>();<br>        zoom=<span class="hljs-number">5</span>;<br>    &#125;<br>     <span class="hljs-keyword">if</span>(selectregion===<span class="hljs-string">&quot;shi&quot;</span>)&#123;      <br>        studyArea=city.<span class="hljs-title function_ invoke__">filter</span>(pie.Filter.<span class="hljs-title function_ invoke__">eq</span>(<span class="hljs-string">&quot;code&quot;</span>,<span class="hljs-title function_ invoke__">parseInt</span>(selectCode)))<br>        .<span class="hljs-title function_ invoke__">first</span>()<br>        .<span class="hljs-title function_ invoke__">geometry</span>();<br>        zoom=<span class="hljs-number">8</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span>(selectregion===<span class="hljs-string">&quot;xian&quot;</span>)&#123;<br>        studyArea=county.<span class="hljs-title function_ invoke__">filter</span>(pie.Filter.<span class="hljs-title function_ invoke__">eq</span>(<span class="hljs-string">&quot;code&quot;</span>,<span class="hljs-title function_ invoke__">parseInt</span>(selectCode)))<br>        .<span class="hljs-title function_ invoke__">first</span>()<br>        .<span class="hljs-title function_ invoke__">geometry</span>();<br>        zoom=<span class="hljs-number">10</span>;<br>    &#125;<br>    studyLayer=Map.<span class="hljs-title function_ invoke__">addLayer</span>(studyArea,&#123;<span class="hljs-attr">color</span>:<span class="hljs-string">&quot;#466FF4&quot;</span>,<span class="hljs-attr">fillColor</span>:<span class="hljs-string">&quot;00000000&quot;</span>,<span class="hljs-attr">width</span>:<span class="hljs-number">4</span>&#125;,<span class="hljs-string">&quot;studyArea&quot;</span>);<br>    Map.<span class="hljs-title function_ invoke__">centerObject</span>(studyArea,zoom);<br>    <span class="hljs-keyword">return</span> studyArea;<br>&#125;<br><span class="hljs-comment">//主逻辑函数</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">main</span>(<span class="hljs-params">studyArea,selectTag1</span>)</span>&#123;<br>    <span class="hljs-keyword">print</span>(<span class="hljs-string">&quot;进入主函数&quot;</span>);<br>    <span class="hljs-comment">//CO</span><br>    <span class="hljs-keyword">var</span> coimage=pie.<span class="hljs-title function_ invoke__">ImageCollection</span>(<span class="hljs-string">&quot;S5P/OFFL_L3_CO&quot;</span>)<br>    .<span class="hljs-title function_ invoke__">filterBounds</span>(studyArea)<br>    .<span class="hljs-title function_ invoke__">filterDate</span>(<span class="hljs-string">&quot;2020-1-1&quot;</span>,<span class="hljs-string">&quot;2020-12-31&quot;</span>)<br>    .<span class="hljs-title function_ invoke__">select</span>(<span class="hljs-string">&quot;CO_column_number_density&quot;</span>)<br>    .<span class="hljs-title function_ invoke__">mean</span>()<br>    .<span class="hljs-title function_ invoke__">clip</span>(studyArea);  <br>    <span class="hljs-comment">//SO2</span><br>    <span class="hljs-keyword">var</span> SO2=pie.<span class="hljs-title function_ invoke__">ImageCollection</span>(<span class="hljs-string">&quot;S5P/OFFL_L3_SO2&quot;</span>)<br>    .<span class="hljs-title function_ invoke__">filterBounds</span>(studyArea)<br>    .<span class="hljs-title function_ invoke__">filterDate</span>(<span class="hljs-string">&quot;2020-1-1&quot;</span>,<span class="hljs-string">&quot;2020-12-31&quot;</span>);<br>    <span class="hljs-keyword">var</span> so2image=SO2.<span class="hljs-title function_ invoke__">select</span>([<span class="hljs-string">&quot;SO2_column_number_density&quot;</span>, <span class="hljs-string">&quot;cloud_fraction&quot;</span>])<br>    .<span class="hljs-title function_ invoke__">map</span>(so2cloudMask)<br>    .<span class="hljs-title function_ invoke__">mean</span>()<br>    .<span class="hljs-title function_ invoke__">clip</span>(studyArea);<br>    <span class="hljs-comment">//NO2</span><br>    <span class="hljs-keyword">var</span> NO2=pie.<span class="hljs-title function_ invoke__">ImageCollection</span>(<span class="hljs-string">&quot;S5P/OFFL_L3_NO2&quot;</span>)<br>    .<span class="hljs-title function_ invoke__">filterBounds</span>(studyArea)<br>    .<span class="hljs-title function_ invoke__">filterDate</span>(<span class="hljs-string">&quot;2020-1-1&quot;</span>,<span class="hljs-string">&quot;2020-12-31&quot;</span>);<br>    <span class="hljs-keyword">var</span> no2image=NO2.<span class="hljs-title function_ invoke__">select</span>([<span class="hljs-string">&quot;tropospheric_NO2_column_number_density&quot;</span>,<span class="hljs-string">&quot;cloud_fraction&quot;</span>])<br>    .<span class="hljs-title function_ invoke__">map</span>(no2cloudMask)<br>    .<span class="hljs-title function_ invoke__">mean</span>()<br>    .<span class="hljs-title function_ invoke__">clip</span>(studyArea);<br>    <span class="hljs-comment">//O3</span><br>    <span class="hljs-keyword">var</span> O3 = pie.<span class="hljs-title function_ invoke__">ImageCollection</span>(<span class="hljs-string">&quot;S5P/OFFL_L3_O3&quot;</span>)<br>    .<span class="hljs-title function_ invoke__">filterBounds</span>(studyArea)<br>    .<span class="hljs-title function_ invoke__">filterDate</span>(<span class="hljs-string">&quot;2020-1-1&quot;</span>,<span class="hljs-string">&quot;2020-12-31&quot;</span>);<br>    <span class="hljs-keyword">var</span> o3image = O3.<span class="hljs-title function_ invoke__">select</span>([<span class="hljs-string">&quot;O3_column_number_density&quot;</span>, <span class="hljs-string">&quot;cloud_fraction&quot;</span>])<br>    .<span class="hljs-title function_ invoke__">map</span>(o3cloudMask)<br>    .<span class="hljs-title function_ invoke__">mean</span>()<br>    .<span class="hljs-title function_ invoke__">clip</span>(studyArea);<br>    <span class="hljs-comment">//PM2.5</span><br>    <span class="hljs-keyword">var</span> pm25Col=pie.<span class="hljs-title function_ invoke__">ImageCollection</span>(<span class="hljs-string">&quot;user/wjx08201305/airpollution/HEBEI2020PM2.5&quot;</span>)<br>    .<span class="hljs-title function_ invoke__">filterBounds</span>(studyArea)<br>    .<span class="hljs-title function_ invoke__">select</span>(<span class="hljs-string">&quot;B1&quot;</span>);<br>    <span class="hljs-keyword">var</span> pm25image=pm25Col.<span class="hljs-title function_ invoke__">mean</span>().<span class="hljs-title function_ invoke__">clip</span>(studyArea);<br>    <span class="hljs-comment">//PM10</span><br>     <span class="hljs-keyword">var</span> pm10Col=pie.<span class="hljs-title function_ invoke__">ImageCollection</span>(<span class="hljs-string">&quot;user/wjx08201305/airpollution/HEBEI2020PM10&quot;</span>)<br>    .<span class="hljs-title function_ invoke__">filterBounds</span>(studyArea)<br>    .<span class="hljs-title function_ invoke__">select</span>(<span class="hljs-string">&quot;B1&quot;</span>);<br>    <span class="hljs-keyword">var</span> pm10image=pm10Col.<span class="hljs-title function_ invoke__">mean</span>().<span class="hljs-title function_ invoke__">clip</span>(studyArea);<br>    <span class="hljs-comment">//选择部分</span><br>    <span class="hljs-keyword">switch</span>(selectTag1)&#123; <br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;二氧化硫&quot;</span>:      <br>         <span class="hljs-keyword">var</span> so2map = <span class="hljs-title function_ invoke__">so2</span>(so2image,studyArea);<br>         <span class="hljs-keyword">var</span> visso2map=&#123;min:<span class="hljs-number">0</span>,max:<span class="hljs-number">1</span>,palette:colorAQI&#125;<br>         layerKey = Map.<span class="hljs-title function_ invoke__">addLayer</span>(so2map, visso2map, <span class="hljs-string">&quot;SO2&quot;</span>, <span class="hljs-literal">true</span>);<br>         <span class="hljs-title function_ invoke__">addMapLenged</span>(<span class="hljs-string">&quot;二氧化硫&quot;</span>);<br>         <span class="hljs-keyword">break</span>;<br>         <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;二氧化氮&quot;</span>:<br>         <span class="hljs-keyword">var</span> no2map = <span class="hljs-title function_ invoke__">no2</span>(no2image,studyArea);<br>         <span class="hljs-keyword">var</span> visno2map=&#123;min:<span class="hljs-number">0</span>,max:<span class="hljs-number">1</span>,palette:colorAQI&#125;<br>         layerKey = Map.<span class="hljs-title function_ invoke__">addLayer</span>(no2map, visno2map, <span class="hljs-string">&quot;NO2&quot;</span>, <span class="hljs-literal">true</span>);<br>         <span class="hljs-title function_ invoke__">addMapLenged</span>(<span class="hljs-string">&quot;二氧化氮&quot;</span>);<br>         <span class="hljs-keyword">break</span>;<br>         <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;一氧化碳&quot;</span>:<br>         <span class="hljs-keyword">var</span> comap = <span class="hljs-title function_ invoke__">co</span>(coimage,studyArea);<br>         <span class="hljs-keyword">var</span> viscomap=&#123;min:<span class="hljs-number">0</span>,max:<span class="hljs-number">1</span>,palette:colorAQI&#125;;<br>         layerKey = Map.<span class="hljs-title function_ invoke__">addLayer</span>(comap, viscomap, <span class="hljs-string">&quot;CO&quot;</span>, <span class="hljs-literal">true</span>);<br>         <span class="hljs-title function_ invoke__">addMapLenged</span>(<span class="hljs-string">&quot;一氧化碳&quot;</span>);<br>         <span class="hljs-keyword">break</span>;<br>         <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;臭氧&quot;</span>:<br>         <span class="hljs-keyword">var</span> o3map = <span class="hljs-title function_ invoke__">o3</span>(o3image,studyArea);<br>         <span class="hljs-keyword">var</span> viso3map=&#123;min:<span class="hljs-number">0</span>,max:<span class="hljs-number">1</span>,palette:colorAQI&#125;;<br>         layerKey = Map.<span class="hljs-title function_ invoke__">addLayer</span>(o3map, viso3map, <span class="hljs-string">&quot;O3&quot;</span>, <span class="hljs-literal">true</span>);<br>         <span class="hljs-title function_ invoke__">addMapLenged</span>(<span class="hljs-string">&quot;臭氧&quot;</span>);<br>         <span class="hljs-keyword">break</span>;<br>         <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;空气质量&quot;</span>:<br>         <span class="hljs-keyword">var</span> aqimap = <span class="hljs-title function_ invoke__">aqi</span>(coimage,so2image,o3image,no2image,pm25image,pm10image,studyArea);<br>         <span class="hljs-keyword">var</span> visaqimap=&#123;min:<span class="hljs-number">0</span>,max:<span class="hljs-number">1</span>,palette:colorAQI&#125;;<br>         layerKey = Map.<span class="hljs-title function_ invoke__">addLayer</span>(aqimap, visaqimap, <span class="hljs-string">&quot;AQI &quot;</span>, <span class="hljs-literal">true</span>);<br>         <span class="hljs-title function_ invoke__">addMapLenged</span>(<span class="hljs-string">&quot;空气质量&quot;</span>);<br>         <span class="hljs-keyword">break</span>;<br>         <span class="hljs-keyword">case</span><span class="hljs-string">&quot;PM2.5&quot;</span>:<br>         <span class="hljs-keyword">var</span> pm25map=<span class="hljs-title function_ invoke__">pm25</span>(pm25image,studyArea);<br>         <span class="hljs-keyword">var</span> vispm25map=&#123;min:<span class="hljs-number">0</span>,max:<span class="hljs-number">1</span>,palette:colorAQI&#125;;<br>         layerKey=Map.<span class="hljs-title function_ invoke__">addLayer</span>(pm25map,vispm25map,<span class="hljs-string">&quot;PM25&quot;</span>,<span class="hljs-literal">true</span>);<br>         <span class="hljs-title function_ invoke__">addMapLenged</span>(<span class="hljs-string">&quot;PM2.5&quot;</span>);<br>         <span class="hljs-keyword">break</span>;<br>         <span class="hljs-keyword">case</span><span class="hljs-string">&quot;PM10&quot;</span>:<br>         <span class="hljs-keyword">var</span> pm10map=<span class="hljs-title function_ invoke__">pm10</span>(pm10image,studyArea);<br>         <span class="hljs-keyword">var</span> vispm10map=&#123;min:<span class="hljs-number">0</span>,max:<span class="hljs-number">1</span>,palette:colorAQI&#125;;<br>         layerKey=Map.<span class="hljs-title function_ invoke__">addLayer</span>(pm10map,vispm10map,<span class="hljs-string">&quot;PM10&quot;</span>,<span class="hljs-literal">true</span>);<br>         <span class="hljs-title function_ invoke__">addMapLenged</span>(<span class="hljs-string">&quot;PM10&quot;</span>);<br>         <span class="hljs-keyword">break</span>;<br>    &#125;<br>&#125; <br><span class="hljs-comment">//去云函数</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">no2cloudMask</span>(<span class="hljs-params">image</span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> k = image.<span class="hljs-title function_ invoke__">updateMask</span>(image.<span class="hljs-title function_ invoke__">select</span>(<span class="hljs-string">&quot;cloud_fraction&quot;</span>).<span class="hljs-title function_ invoke__">lt</span>(<span class="hljs-number">0.2</span>));<br>  <span class="hljs-keyword">return</span> k.<span class="hljs-title function_ invoke__">select</span>(<span class="hljs-string">&quot;tropospheric_NO2_column_number_density&quot;</span>);<br>&#125; <br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o3cloudMask</span>(<span class="hljs-params">image</span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> k = image.<span class="hljs-title function_ invoke__">updateMask</span>(image.<span class="hljs-title function_ invoke__">select</span>(<span class="hljs-string">&quot;cloud_fraction&quot;</span>).<span class="hljs-title function_ invoke__">lt</span>(<span class="hljs-number">0.2</span>));<br>  <span class="hljs-keyword">return</span> k.<span class="hljs-title function_ invoke__">select</span>(<span class="hljs-string">&quot;O3_column_number_density&quot;</span>);<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">so2cloudMask</span>(<span class="hljs-params">image</span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> k = image.<span class="hljs-title function_ invoke__">updateMask</span>(image.<span class="hljs-title function_ invoke__">select</span>(<span class="hljs-string">&quot;cloud_fraction&quot;</span>).<span class="hljs-title function_ invoke__">lt</span>(<span class="hljs-number">0.2</span>));<br>  <span class="hljs-keyword">return</span> k.<span class="hljs-title function_ invoke__">select</span>(<span class="hljs-string">&quot;SO2_column_number_density&quot;</span>);<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">no2</span>(<span class="hljs-params">image,studyArea</span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> NO2 = image.<span class="hljs-title function_ invoke__">select</span>([<br>    <span class="hljs-string">&quot;tropospheric_NO2_column_number_density&quot;</span>,<span class="hljs-string">&quot;cloud_fraction&quot;</span>,]).<span class="hljs-title function_ invoke__">rename</span>(<span class="hljs-string">&quot;NO2&quot;</span>);<br>  <span class="hljs-keyword">var</span> NO2_max = NO2.<span class="hljs-title function_ invoke__">reduceRegion</span>(pie.Reducer.<span class="hljs-title function_ invoke__">max</span>(), studyArea, <span class="hljs-number">7000</span>).<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">&quot;NO2&quot;</span>);<br>  NO2_max = pie.<span class="hljs-title function_ invoke__">Number</span>(NO2_max);<br>  <span class="hljs-keyword">var</span> NO2_min = NO2.<span class="hljs-title function_ invoke__">reduceRegion</span>(pie.Reducer.<span class="hljs-title function_ invoke__">min</span>(), studyArea, <span class="hljs-number">7000</span>).<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">&quot;NO2&quot;</span>);<br>  NO2_min = pie.<span class="hljs-title function_ invoke__">Number</span>(NO2_min);<br>  <span class="hljs-keyword">var</span> image_NO2 = NO2.<span class="hljs-title function_ invoke__">subtract</span>(NO2_min).<span class="hljs-title function_ invoke__">divide</span>(NO2_max.<span class="hljs-title function_ invoke__">subtract</span>(NO2_min));<br>  <span class="hljs-keyword">return</span> image_NO2;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">o3</span>(<span class="hljs-params">image,studyArea</span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> O3 = image.<span class="hljs-title function_ invoke__">select</span>([<span class="hljs-string">&quot;O3_column_number_density&quot;</span>, <span class="hljs-string">&quot;cloud_fraction&quot;</span>])<br>  .<span class="hljs-title function_ invoke__">rename</span>(<span class="hljs-string">&quot;O3&quot;</span>);<br>  <span class="hljs-keyword">var</span> O3_max = O3.<span class="hljs-title function_ invoke__">reduceRegion</span>(pie.Reducer.<span class="hljs-title function_ invoke__">max</span>(), studyArea, <span class="hljs-number">7500</span>).<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">&quot;O3&quot;</span>);<br>  O3_max = pie.<span class="hljs-title function_ invoke__">Number</span>(O3_max);<br>  <span class="hljs-keyword">var</span> O3_min = O3.<span class="hljs-title function_ invoke__">reduceRegion</span>(pie.Reducer.<span class="hljs-title function_ invoke__">min</span>(), studyArea, <span class="hljs-number">7500</span>).<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">&quot;O3&quot;</span>);<br>  O3_min = pie.<span class="hljs-title function_ invoke__">Number</span>(O3_min);<br>  <span class="hljs-keyword">var</span> image_O3 = O3.<span class="hljs-title function_ invoke__">subtract</span>(O3_min).<span class="hljs-title function_ invoke__">divide</span>(O3_max.<span class="hljs-title function_ invoke__">subtract</span>(O3_min));<br>  <span class="hljs-keyword">return</span> image_O3;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">so2</span>(<span class="hljs-params">image,studyArea</span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> SO2 = image.<span class="hljs-title function_ invoke__">select</span>([<span class="hljs-string">&quot;SO2_column_number_density&quot;</span>, <span class="hljs-string">&quot;cloud_fraction&quot;</span>])<br>    .<span class="hljs-title function_ invoke__">rename</span>(<span class="hljs-string">&quot;SO2&quot;</span>);<br>  <span class="hljs-keyword">var</span> SO2_max = SO2.<span class="hljs-title function_ invoke__">reduceRegion</span>(pie.Reducer.<span class="hljs-title function_ invoke__">max</span>(), studyArea, <span class="hljs-number">7500</span>).<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">&quot;SO2&quot;</span>);<br>  SO2_max = pie.<span class="hljs-title function_ invoke__">Number</span>(SO2_max);<br>  <span class="hljs-keyword">var</span> SO2_min = SO2.<span class="hljs-title function_ invoke__">reduceRegion</span>(pie.Reducer.<span class="hljs-title function_ invoke__">min</span>(), studyArea, <span class="hljs-number">7500</span>).<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">&quot;SO2&quot;</span>);<br>  SO2_min = pie.<span class="hljs-title function_ invoke__">Number</span>(SO2_min);<br>  <span class="hljs-keyword">var</span> image_SO2 = SO2.<span class="hljs-title function_ invoke__">subtract</span>(SO2_min).<span class="hljs-title function_ invoke__">divide</span>(SO2_max.<span class="hljs-title function_ invoke__">subtract</span>(SO2_min));<br>  <span class="hljs-keyword">return</span> image_SO2;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">co</span>(<span class="hljs-params">image,studyArea</span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> CO = image.<span class="hljs-title function_ invoke__">select</span>(<span class="hljs-string">&quot;CO_column_number_density&quot;</span>)<br>    .<span class="hljs-title function_ invoke__">rename</span>(<span class="hljs-string">&quot;CO&quot;</span>);<br>  <span class="hljs-keyword">var</span> CO_max = CO.<span class="hljs-title function_ invoke__">reduceRegion</span>(pie.Reducer.<span class="hljs-title function_ invoke__">max</span>(), studyArea, <span class="hljs-number">7500</span>).<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">&quot;CO&quot;</span>);<br>  CO_max = pie.<span class="hljs-title function_ invoke__">Number</span>(CO_max);<br>  <span class="hljs-keyword">var</span> CO_min = CO.<span class="hljs-title function_ invoke__">reduceRegion</span>(pie.Reducer.<span class="hljs-title function_ invoke__">min</span>(), studyArea, <span class="hljs-number">7500</span>).<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">&quot;CO&quot;</span>);<br>  CO_min = pie.<span class="hljs-title function_ invoke__">Number</span>(CO_min);<br>  <span class="hljs-keyword">var</span> image_CO = CO.<span class="hljs-title function_ invoke__">subtract</span>(CO_min).<span class="hljs-title function_ invoke__">divide</span>(CO_max.<span class="hljs-title function_ invoke__">subtract</span>(CO_min));<br>  <span class="hljs-keyword">return</span> image_CO;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pm25</span>(<span class="hljs-params">image,studyArea</span>)</span>&#123;<br>    <span class="hljs-keyword">var</span> B1=image.<span class="hljs-title function_ invoke__">select</span>(<span class="hljs-string">&quot;B1&quot;</span>);<br>    <span class="hljs-keyword">var</span> PM25=B1.<span class="hljs-title function_ invoke__">rename</span>(<span class="hljs-string">&quot;PM25&quot;</span>);   <br>    <span class="hljs-keyword">var</span> PM25_max=PM25.<span class="hljs-title function_ invoke__">reduceRegion</span>(pie.Reducer.<span class="hljs-title function_ invoke__">max</span>(),studyArea,<span class="hljs-number">7500</span>).<span class="hljs-title function_ invoke__">get</span>(<br>        <span class="hljs-string">&quot;PM25&quot;</span><br>    );<br>    PM25_max=pie.<span class="hljs-title function_ invoke__">Number</span>(PM25_max);<br>    <span class="hljs-keyword">var</span> PM25_min=PM25.<span class="hljs-title function_ invoke__">reduceRegion</span>(pie.Reducer.<span class="hljs-title function_ invoke__">min</span>(),studyArea,<span class="hljs-number">7500</span>).<span class="hljs-title function_ invoke__">get</span>(<br>        <span class="hljs-string">&quot;PM25&quot;</span><br>    );<br>    PM25_min=pie.<span class="hljs-title function_ invoke__">Number</span>(PM25_min);<br>    <span class="hljs-keyword">var</span> img_PM25=PM25.<span class="hljs-title function_ invoke__">subtract</span>(PM25_min).<span class="hljs-title function_ invoke__">divide</span>(PM25_max.<span class="hljs-title function_ invoke__">subtract</span>(PM25_min));<br>    <span class="hljs-keyword">return</span> img_PM25;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pm10</span>(<span class="hljs-params">image,studyArea</span>)</span>&#123;<br>    <span class="hljs-keyword">var</span> B1=image.<span class="hljs-title function_ invoke__">select</span>(<span class="hljs-string">&quot;B1&quot;</span>);<br>    <span class="hljs-keyword">var</span> PM10=B1.<span class="hljs-title function_ invoke__">rename</span>(<span class="hljs-string">&quot;PM10&quot;</span>);   <br>    <span class="hljs-keyword">var</span> PM10_max=PM10.<span class="hljs-title function_ invoke__">reduceRegion</span>(pie.Reducer.<span class="hljs-title function_ invoke__">max</span>(),studyArea,<span class="hljs-number">7500</span>).<span class="hljs-title function_ invoke__">get</span>(<br>        <span class="hljs-string">&quot;PM10&quot;</span><br>    );<br>    PM10_max=pie.<span class="hljs-title function_ invoke__">Number</span>(PM10_max);<br>    <span class="hljs-keyword">var</span> PM10_min=PM10.<span class="hljs-title function_ invoke__">reduceRegion</span>(pie.Reducer.<span class="hljs-title function_ invoke__">min</span>(),studyArea,<span class="hljs-number">7500</span>).<span class="hljs-title function_ invoke__">get</span>(<br>        <span class="hljs-string">&quot;PM10&quot;</span><br>    );<br>    PM10_min=pie.<span class="hljs-title function_ invoke__">Number</span>(PM10_min);<br>    <span class="hljs-keyword">var</span> img_PM10=PM10.<span class="hljs-title function_ invoke__">subtract</span>(PM10_min).<span class="hljs-title function_ invoke__">divide</span>(PM10_max.<span class="hljs-title function_ invoke__">subtract</span>(PM10_min));<br>    <span class="hljs-keyword">return</span> img_PM10;<br>&#125;<br><span class="hljs-comment">//计算空气质量</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">aqi</span>(<span class="hljs-params">coimage,so2image,o3image,no2image,pm25image,pm10image,studyArea</span>) </span>&#123;<br>  <span class="hljs-keyword">var</span> co1 = <span class="hljs-title function_ invoke__">co</span>(coimage,studyArea);<br>  <span class="hljs-keyword">var</span> so21 = <span class="hljs-title function_ invoke__">so2</span>(so2image,studyArea);<br>  <span class="hljs-keyword">var</span> o31 = <span class="hljs-title function_ invoke__">o3</span>(o3image,studyArea);<br>  <span class="hljs-keyword">var</span> no21 = <span class="hljs-title function_ invoke__">no2</span>(no2image,studyArea);<br>  <span class="hljs-keyword">var</span> pm251=<span class="hljs-title function_ invoke__">pm25</span>(pm25image,studyArea);<br>  <span class="hljs-keyword">var</span> pm101=<span class="hljs-title function_ invoke__">pm10</span>(pm10image,studyArea);<br>  <span class="hljs-keyword">var</span> AQI = no21<br>    .<span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-number">0.166</span>)<br>    .<span class="hljs-title function_ invoke__">add</span>(o31.<span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-number">0.166</span>))<br>    .<span class="hljs-title function_ invoke__">add</span>(so21.<span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-number">0.166</span>))<br>    .<span class="hljs-title function_ invoke__">add</span>(co1.<span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-number">0.166</span>))<br>    .<span class="hljs-title function_ invoke__">add</span>(pm251.<span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-number">0.166</span>))<br>    .<span class="hljs-title function_ invoke__">add</span>(pm101.<span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-number">0.17</span>))<br>    .<span class="hljs-title function_ invoke__">rename</span>(<span class="hljs-string">&quot;AQI&quot;</span>);<br>  <span class="hljs-comment">//计算最大值最小值</span><br>  <span class="hljs-keyword">var</span> AQI_max = AQI.<span class="hljs-title function_ invoke__">reduceRegion</span>(pie.Reducer.<span class="hljs-title function_ invoke__">max</span>(), studyArea, <span class="hljs-number">7500</span>).<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">&quot;AQI&quot;</span>);<br>  AQI_max = pie.<span class="hljs-title function_ invoke__">Number</span>(AQI_max);<br>  <span class="hljs-keyword">var</span> AQI_min = AQI.<span class="hljs-title function_ invoke__">reduceRegion</span>(pie.Reducer.<span class="hljs-title function_ invoke__">min</span>(), studyArea, <span class="hljs-number">7500</span>).<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">&quot;AQI&quot;</span>);<br>  AQI_min = pie.<span class="hljs-title function_ invoke__">Number</span>(AQI_min);<br>  <span class="hljs-comment">//归一化</span><br>  <span class="hljs-keyword">var</span> image_AQI = AQI.<span class="hljs-title function_ invoke__">subtract</span>(AQI_min)<br>    .<span class="hljs-title function_ invoke__">divide</span>(AQI_max.<span class="hljs-title function_ invoke__">subtract</span>(AQI_min))<br>    .<span class="hljs-title function_ invoke__">rename</span>(<span class="hljs-string">&quot;image_AQI&quot;</span>);<br>  <span class="hljs-keyword">return</span> image_AQI;<br>&#125;  <br><span class="hljs-comment">//UI部分</span><br><span class="hljs-comment">//标题</span><br><span class="hljs-keyword">var</span> label=ui.<span class="hljs-title function_ invoke__">Label</span>(<span class="hljs-string">&quot;邯郸市空气污染和噪声污染研究&quot;</span>,&#123;<span class="hljs-string">&quot;font-size&quot;</span>:<span class="hljs-string">&quot;20px&quot;</span>,<span class="hljs-attr">textAlign</span>:<span class="hljs-string">&quot;center&quot;</span>&#125;);<br><span class="hljs-keyword">var</span> label1=ui.<span class="hljs-title function_ invoke__">Label</span>(<span class="hljs-string">&quot;全国2020年空气污染研究（归一化）：&quot;</span>,&#123;<span class="hljs-string">&quot;font-size&quot;</span>:<span class="hljs-string">&quot;18px&quot;</span>,<span class="hljs-attr">color</span>:<span class="hljs-string">&quot;#466FF4&quot;</span>,<span class="hljs-attr">textAlign</span>:<span class="hljs-string">&quot;left&quot;</span>&#125;);<br><span class="hljs-keyword">var</span> label2=ui.<span class="hljs-title function_ invoke__">Label</span>(<span class="hljs-string">&quot;深圳市噪声功能分区地图&quot;</span>,&#123;<span class="hljs-string">&quot;font-size&quot;</span>:<span class="hljs-string">&quot;18px&quot;</span>,<span class="hljs-attr">color</span>:<span class="hljs-string">&quot;#466FF4&quot;</span>,<span class="hljs-attr">textAlign</span>:<span class="hljs-string">&quot;left&quot;</span>,&#125;,<span class="hljs-string">&quot;https://ep.meeb.sz.gov.cn:8443/nosiemap/funcMap/index.do&quot;</span>);<br><span class="hljs-keyword">var</span> label4=ui.<span class="hljs-title function_ invoke__">Label</span>(<span class="hljs-string">&quot;中国环境噪声污染防治报告&quot;</span>,&#123;<span class="hljs-string">&quot;font-size&quot;</span>:<span class="hljs-string">&quot;18px&quot;</span>,<span class="hljs-attr">color</span>:<span class="hljs-string">&quot;#466FF4&quot;</span>,<span class="hljs-attr">textAlign</span>:<span class="hljs-string">&quot;left&quot;</span>,&#125;,<span class="hljs-string">&quot;https://www.mee.gov.cn/hjzl/sthjzk/hjzywr/202106/W020210617595008906212.pdf&quot;</span>);<br><span class="hljs-keyword">var</span> label3=ui.<span class="hljs-title function_ invoke__">Label</span>(<span class="hljs-string">&quot;帮助：&quot;</span>,&#123;<span class="hljs-string">&quot;font-size&quot;</span>:<span class="hljs-string">&quot;18px&quot;</span>,<span class="hljs-attr">color</span>:<span class="hljs-string">&quot;#466FF4&quot;</span>,<span class="hljs-attr">textAlign</span>:<span class="hljs-string">&quot;left&quot;</span>&#125;);<br> <span class="hljs-comment">//地区选择器</span><br> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onChange</span>(<span class="hljs-params">codeList,nameList</span>)</span>&#123;<br>  <span class="hljs-keyword">var</span> index = nameList.length;<br>  <span class="hljs-keyword">if</span> (index === <span class="hljs-number">1</span>) &#123;<br>    selectCode = nameList[<span class="hljs-number">0</span>].value;<br>    selectName = nameList[<span class="hljs-number">0</span>].label;<br>    selectregion=<span class="hljs-string">&quot;sheng&quot;</span>;<br>  &#125; <br>  <span class="hljs-keyword">if</span>(index===<span class="hljs-number">3</span>)<br>  &#123;<br>    selectCode = nameList[<span class="hljs-number">2</span>].value;<br>    selectName = nameList[<span class="hljs-number">2</span>].label;<br>    selectregion=<span class="hljs-string">&quot;xian&quot;</span>;<br>   <br>  &#125;<br>  <span class="hljs-keyword">if</span>(index===<span class="hljs-number">2</span>)<br>  &#123;<br>    selectCode = nameList[<span class="hljs-number">1</span>].value;<br>    selectName = nameList[<span class="hljs-number">1</span>].label;<br>    selectregion=<span class="hljs-string">&quot;shi&quot;</span>;<br>   <br>  &#125;  <br>  <span class="hljs-keyword">return</span> selectregion,selectName,selectCode;<br> &#125;<br> <span class="hljs-keyword">var</span> geoselectName1 = ui.<span class="hljs-title function_ invoke__">Label</span>(<span class="hljs-string">&quot;选择地区：&quot;</span>,&#123;<span class="hljs-string">&quot;font-size&quot;</span>:<span class="hljs-string">&quot;18px&quot;</span>,<span class="hljs-attr">textAlign</span>:<span class="hljs-string">&quot;left&quot;</span>&#125;);<br> <span class="hljs-keyword">var</span> GeoCascader1=ui.<span class="hljs-title function_ invoke__">GeoCascader</span>(&#123;<br>     <span class="hljs-attr">placeholder</span>:<span class="hljs-string">&quot;请选择行政区划&quot;</span>,<br>     <span class="hljs-attr">init</span>:&#123;<br>         <span class="hljs-attr">list</span>:[<span class="hljs-string">&quot;province&quot;</span>,<span class="hljs-string">&quot;city&quot;</span>,<span class="hljs-string">&quot;county&quot;</span>],<br>        <br>     &#125;,<br>     <span class="hljs-attr">onChange</span>:onChange,<br>     <span class="hljs-attr">style</span>:&#123;<br>         <span class="hljs-attr">width</span>:<span class="hljs-string">&quot;220px&quot;</span>,<br>     &#125;<br> &#125;)<br> <span class="hljs-keyword">var</span> GeoselectPanel = ui.<span class="hljs-title function_ invoke__">Panel</span>(&#123;<br>   <span class="hljs-attr">widgets</span>: [geoselectName1,GeoCascader1],<br>   <span class="hljs-attr">style</span>: &#123; <span class="hljs-attr">left</span>: <span class="hljs-string">&quot;10px&quot;</span> &#125;,<br>   <span class="hljs-attr">layout</span>: ui.Layout.<span class="hljs-title function_ invoke__">flow</span>(<span class="hljs-string">&quot;horizontal&quot;</span>),<br> &#125;);<br> <span class="hljs-comment">//AQI选择器部分</span><br> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">funCascader1</span>(<span class="hljs-params">value</span>) </span>&#123;<br>   <span class="hljs-keyword">var</span> index = <span class="hljs-title function_ invoke__">parseInt</span>(value.length);<br>   selectTag1 = value[index - <span class="hljs-number">1</span>];<br>   <span class="hljs-keyword">print</span>(<span class="hljs-string">&quot;选择的指标为:&quot;</span>, selectTag1);<br>   <span class="hljs-keyword">return</span> selectTag1;<br> &#125;<br> <span class="hljs-keyword">var</span> cascader1 = ui.<span class="hljs-title function_ invoke__">Cascader</span>(&#123;<br>   <span class="hljs-attr">placeholder</span>: <span class="hljs-string">&quot;请选择指标&quot;</span>,<br>   <span class="hljs-attr">content</span>: [<br>     &#123;<br>       <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;空气质量&quot;</span>,<br>       <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;空气质量&quot;</span>,<br>       <span class="hljs-attr">children</span>: [<br>         &#123;<br>           <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;二氧化硫&quot;</span>,<br>           <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;二氧化硫&quot;</span>,<br>         &#125;,<br>         &#123;<br>           <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;一氧化碳&quot;</span>,<br>           <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;一氧化碳&quot;</span>,<br>         &#125;,<br>         &#123;<br>           <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;二氧化氮&quot;</span>,<br>           <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;二氧化氮&quot;</span>,<br>         &#125;,<br>         &#123;<br>           <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;臭氧&quot;</span>,<br>           <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;臭氧&quot;</span>,<br>         &#125;,<br>         &#123;<br>           <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;PM2.5&quot;</span>,<br>           <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;PM2.5&quot;</span>,<br>         &#125;,<br>         &#123;<br>           <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;PM10&quot;</span>,<br>           <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;PM10&quot;</span>,<br>         &#125;,<br>         ]<br>     &#125;<br>   ],<br>   <span class="hljs-attr">value</span>: [<span class="hljs-string">&quot;空气质量&quot;</span>],<br>   <span class="hljs-attr">style</span>: &#123; <span class="hljs-attr">width</span>: <span class="hljs-string">&quot;220px&quot;</span> &#125;,<br>   <span class="hljs-attr">onChange</span>: funCascader1,<br> &#125;);<br> <span class="hljs-keyword">var</span> selectName1 = ui.<span class="hljs-title function_ invoke__">Label</span>(<span class="hljs-string">&quot;选择指标：&quot;</span>,&#123;<span class="hljs-string">&quot;font-size&quot;</span>:<span class="hljs-string">&quot;18px&quot;</span>,<span class="hljs-attr">textAlign</span>:<span class="hljs-string">&quot;left&quot;</span>&#125;);<br> <span class="hljs-keyword">var</span> selectPanel1 = ui.<span class="hljs-title function_ invoke__">Panel</span>(&#123;<br>   <span class="hljs-attr">widgets</span>: [selectName1, cascader1],<br>   <span class="hljs-attr">style</span>: &#123; <span class="hljs-attr">left</span>: <span class="hljs-string">&quot;10px&quot;</span> &#125;,<br>   <span class="hljs-attr">layout</span>: ui.Layout.<span class="hljs-title function_ invoke__">flow</span>(<span class="hljs-string">&quot;horizontal&quot;</span>),<br> &#125;);<br> <span class="hljs-comment">// 按钮部分</span><br> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clickBtn</span>(<span class="hljs-params"></span>) </span>&#123;<br>   <span class="hljs-keyword">print</span>(<br>     <span class="hljs-string">&quot;点击按钮，选择的参数是：&quot;</span>,<br>      selectName+<span class="hljs-string">&quot;:&quot;</span>+selectTag1<br>   );<br>   <span class="hljs-comment">//清空现有层</span><br>   <span class="hljs-keyword">if</span> (layerKey != <span class="hljs-literal">null</span>) &#123;<br>     Map.<span class="hljs-title function_ invoke__">removeLayer</span>(layerKey);<br>   &#125; <br> <span class="hljs-comment">//获取研究区域</span><br>  <span class="hljs-keyword">var</span> studyArea=<span class="hljs-title function_ invoke__">getstudyArea</span>(selectCode,selectregion);<br> <span class="hljs-comment">//执行主函数</span><br> <span class="hljs-title function_ invoke__">main</span>(studyArea,selectTag1);<br> &#125;<br> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cancelclickBtn</span>(<span class="hljs-params"></span>) </span>&#123;<br>     <span class="hljs-comment">//清空现有层</span><br>   <span class="hljs-keyword">if</span> (layerKey != <span class="hljs-literal">null</span>) &#123;<br>     Map.<span class="hljs-title function_ invoke__">removeLayer</span>(layerKey);<br>   &#125; <br> &#125;<br>  <span class="hljs-keyword">var</span> btn1 = ui.<span class="hljs-title function_ invoke__">Button</span>(&#123;<br>   <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;清空&quot;</span>,<br>   <span class="hljs-attr">style</span>: &#123; <span class="hljs-attr">left</span>: <span class="hljs-string">&quot;120px&quot;</span> &#125;,<br>   <span class="hljs-attr">onClick</span>: cancelclickBtn,<br> &#125;);<br> <span class="hljs-keyword">var</span> btn2 = ui.<span class="hljs-title function_ invoke__">Button</span>(&#123;<br>   <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;确定&quot;</span>,<br>   <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;success&quot;</span>,<br>   <span class="hljs-attr">onClick</span>: clickBtn,<br>   <span class="hljs-attr">style</span>: &#123; <span class="hljs-attr">left</span>: <span class="hljs-string">&quot;60px&quot;</span>, <span class="hljs-attr">top</span>: <span class="hljs-string">&quot;0px&quot;</span> &#125;,<br> &#125;);<br> <span class="hljs-keyword">var</span> btnPanel1 = ui.<span class="hljs-title function_ invoke__">Panel</span>(&#123;<br>   <span class="hljs-attr">widgets</span>: [btn2, btn1],<br>   <span class="hljs-attr">style</span>: &#123; <span class="hljs-attr">left</span>: <span class="hljs-string">&quot;10px&quot;</span>, <span class="hljs-attr">top</span>: <span class="hljs-string">&quot;20px&quot;</span> &#125;,<br>   <span class="hljs-attr">layout</span>: ui.Layout.<span class="hljs-title function_ invoke__">flow</span>(<span class="hljs-string">&quot;horizontal&quot;</span>),<br> &#125;);<br> <span class="hljs-comment">//选择部分容器</span><br><span class="hljs-keyword">var</span> selectairPanel=ui.<span class="hljs-title function_ invoke__">Panel</span>(&#123;<br>    <span class="hljs-attr">widgets</span>:[label1,GeoselectPanel,selectPanel1,btnPanel1],<br>    <span class="hljs-attr">style</span>:&#123;     <br>     <span class="hljs-attr">height</span>:<span class="hljs-string">&quot;250px&quot;</span>,<br>     <span class="hljs-attr">width</span>:<span class="hljs-string">&quot;370px&quot;</span>,<br>      &#125;<br>&#125;)<br> <span class="hljs-comment">//空气污染容器</span><br><span class="hljs-keyword">var</span> airPanel = ui.<span class="hljs-title function_ invoke__">Panel</span>(&#123;<br>   <span class="hljs-attr">widgets</span>: [selectairPanel],<br>   <span class="hljs-attr">style</span>: &#123; <span class="hljs-attr">left</span>: <span class="hljs-string">&quot;10px&quot;</span> &#125;,<br>   <span class="hljs-attr">layout</span>: ui.Layout.<span class="hljs-title function_ invoke__">flow</span>(<span class="hljs-string">&quot;horizontal&quot;</span>),<br> &#125;);<br><span class="hljs-comment">//噪声污染容器</span><br><span class="hljs-keyword">var</span> noisePanel = ui.<span class="hljs-title function_ invoke__">Panel</span>(&#123;<br>   <span class="hljs-attr">widgets</span>: [label2,label4],<br>   <span class="hljs-attr">style</span>: &#123; <span class="hljs-attr">left</span>: <span class="hljs-string">&quot;10px&quot;</span> &#125;,<br>   <span class="hljs-attr">layout</span>: ui.Layout.<span class="hljs-title function_ invoke__">flow</span>(<span class="hljs-string">&quot;horizontal&quot;</span>),<br> &#125;);<br><span class="hljs-comment">//帮助部分容器</span><br><span class="hljs-keyword">var</span> helpPanel= ui.<span class="hljs-title function_ invoke__">Panel</span>(&#123;<br>   <span class="hljs-attr">widgets</span>: [label3],<br>   <span class="hljs-attr">style</span>: &#123; <span class="hljs-attr">left</span>: <span class="hljs-string">&quot;10px&quot;</span> &#125;,<br>   <span class="hljs-attr">layout</span>: ui.Layout.<span class="hljs-title function_ invoke__">flow</span>(<span class="hljs-string">&quot;horizontal&quot;</span>),<br> &#125;);<br><span class="hljs-comment">//全局标签页</span><br>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">changerootTabs</span>(<span class="hljs-params">value</span>) </span>&#123;<br>    <span class="hljs-keyword">print</span>(<span class="hljs-string">&quot;您选择的是：&quot;</span>+value);<br>&#125;<br><span class="hljs-keyword">var</span> roottabs = ui.<span class="hljs-title function_ invoke__">Tabs</span>(<br>&#123;<br>    <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;空气污染&quot;</span>,<br>    <span class="hljs-attr">tabPanels</span>: [<br>        &#123;<br>            <span class="hljs-attr">panel</span>: airPanel,<br>            <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;空气污染&quot;</span>,<br>            <span class="hljs-attr">disabled</span>: <span class="hljs-literal">false</span>,<br>        &#125;,<br>        &#123;<br>            <span class="hljs-attr">panel</span>: noisePanel,<br>            <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;噪声污染&quot;</span>,<br>            <span class="hljs-attr">disabled</span>: <span class="hljs-literal">false</span>,<br>        &#125;,<br>        &#123;<br>            <span class="hljs-attr">panel</span>: helpPanel,<br>            <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;帮助文档&quot;</span>,<br>            <span class="hljs-attr">disabled</span>: <span class="hljs-literal">false</span>,<br>        &#125;<br>        ],<br>        <span class="hljs-attr">style</span>: &#123;<br>        <span class="hljs-attr">width</span>: <span class="hljs-string">&quot;400px&quot;</span>,<br>        <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&quot;#fff&quot;</span>,<br>        &#125;,<br>        <span class="hljs-attr">onClick</span>: changerootTabs<br>    &#125;<br>)<br>ui.root.<span class="hljs-title function_ invoke__">add</span>(roottabs);<br><span class="hljs-comment">//图例</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addMapLenged</span>(<span class="hljs-params">INDEX</span>)</span><br><span class="hljs-function"></span>&#123; <br>    <span class="hljs-keyword">switch</span> (INDEX) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;空气质量&quot;</span>:<br>    colors = colorAQI;<br>    <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;PM2.5&quot;</span>:<br>    colors = colorAQI;<br>    <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;PM10&quot;</span>:<br>    colors = colorAQI;<br>      <span class="hljs-keyword">break</span>;  <br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;二氧化硫&quot;</span>:<br>      colors = colorAQI;<br>      <span class="hljs-keyword">break</span>;  <br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;二氧化氮&quot;</span>:<br>      colors = colorAQI;<br>      <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;一氧化碳&quot;</span>:<br>      colors = colorAQI;<br>      <span class="hljs-keyword">break</span>;  <br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;臭氧&quot;</span>:<br>      colors = colorAQI;<br>      <span class="hljs-keyword">break</span>;<br>    &#125;<br>  <span class="hljs-keyword">var</span> data=&#123;<br>    title: INDEX+<span class="hljs-string">&quot;系数&quot;</span>,<br>    colors: colors,<br>    labels: [<span class="hljs-string">&quot;0&quot;</span>, <span class="hljs-string">&quot;0.2&quot;</span>, <span class="hljs-string">&quot;0.4&quot;</span>, <span class="hljs-string">&quot;0.6&quot;</span>, <span class="hljs-string">&quot;0.8&quot;</span>, <span class="hljs-string">&quot;1.0&quot;</span>],<br>    step: <span class="hljs-number">30</span>,<br>  &#125;; <br>    <span class="hljs-keyword">var</span> style = &#123;<br>    right: <span class="hljs-string">&quot;100px&quot;</span>,<br>    bottom: <span class="hljs-string">&quot;10px&quot;</span>,<br>    height: <span class="hljs-string">&quot;70px&quot;</span>,<br>    width: <span class="hljs-string">&quot;300px&quot;</span>,<br>  &#125;;<br>  <span class="hljs-keyword">var</span> legend = ui.<span class="hljs-title function_ invoke__">Legend</span>(data, style);<br>  Map.<span class="hljs-title function_ invoke__">addUI</span>(legend);<br>&#125;<br><span class="hljs-comment">//空气质量图例</span><br><span class="hljs-keyword">var</span> colorAQI=[ <span class="hljs-string">&quot;#040274&quot;</span>,<span class="hljs-string">&quot;#040281&quot;</span>,<span class="hljs-string">&quot;#0502a3&quot;</span>,<span class="hljs-string">&quot;#0502b8&quot;</span>,<span class="hljs-string">&quot;#0502ce&quot;</span>,<span class="hljs-string">&quot;#0502e6&quot;</span>,<span class="hljs-string">&quot;#0602ff&quot;</span>,<span class="hljs-string">&quot;#235cb1&quot;</span>,<span class="hljs-string">&quot;#307ef3&quot;</span>,<br>    <span class="hljs-string">&quot;#269db1&quot;</span>,<span class="hljs-string">&quot;#30c8e2&quot;</span>,<span class="hljs-string">&quot;#32d3ef&quot;</span>,<span class="hljs-string">&quot;#3be285&quot;</span>,<span class="hljs-string">&quot;#3ff38f&quot;</span>,<span class="hljs-string">&quot;#86e26f&quot;</span>,<span class="hljs-string">&quot;#3ae237&quot;</span>,<span class="hljs-string">&quot;#b5e22e&quot;</span>,<span class="hljs-string">&quot;#d6e21f&quot;</span>,<span class="hljs-string">&quot;#fff705&quot;</span>,<br>    <span class="hljs-string">&quot;#ffd611&quot;</span>,<span class="hljs-string">&quot;#ffb613&quot;</span>,<span class="hljs-string">&quot;#ff8b13&quot;</span>,<span class="hljs-string">&quot;#ff6e08&quot;</span>,<span class="hljs-string">&quot;#ff500d&quot;</span>,<span class="hljs-string">&quot;#ff0000&quot;</span>,<span class="hljs-string">&quot;#de0101&quot;</span>,<span class="hljs-string">&quot;#c21301&quot;</span>,<span class="hljs-string">&quot;#a71001&quot;</span>,<span class="hljs-string">&quot;#911003&quot;</span>,];<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>遥感</category>
      
    </categories>
    
    
    <tags>
      
      <tag>PIE</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>脆弱性评价</title>
    <link href="/2022/08/22/%E8%84%86%E5%BC%B1%E6%80%A7%E8%AF%84%E4%BB%B7/"/>
    <url>/2022/08/22/%E8%84%86%E5%BC%B1%E6%80%A7%E8%AF%84%E4%BB%B7/</url>
    
    <content type="html"><![CDATA[<p>加载研究区</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//加载研究区</span><br>var studyArea = pie.<span class="hljs-constructor">FeatureCollection(<span class="hljs-string">&quot;NGCC/CHINA_CITY_BOUNDARY&quot;</span>)</span><br>    .filter(pie.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Filter</span>.</span></span>eq(<span class="hljs-string">&quot;name&quot;</span>,<span class="hljs-string">&quot;邯郸市&quot;</span>))<br>    .first<span class="hljs-literal">()</span><br>    .geometry<span class="hljs-literal">()</span>;<br><span class="hljs-comment">//加载研究区边界</span><br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Map</span>.</span></span>add<span class="hljs-constructor">Layer(<span class="hljs-params">studyArea</span>, &#123; <span class="hljs-params">color</span>: &#x27;<span class="hljs-params">black</span>&#x27;, <span class="hljs-params">fillColor</span>: &#x27;00000000&#x27; &#125;, <span class="hljs-string">&quot;roi&quot;</span>)</span>;<br><span class="hljs-comment">//定位地图中心</span><br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Map</span>.</span></span>center<span class="hljs-constructor">Object(<span class="hljs-params">studyArea</span>, 8)</span>;<br></code></pre></td></tr></table></figure><p>dem及坡度代码（未修改）</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">var SRTM = pie.<span class="hljs-constructor">ImageCollection(&#x27;DEM<span class="hljs-operator">/</span>SRTM_30&#x27;)</span><br>     .filter<span class="hljs-constructor">Bounds(<span class="hljs-params">studyArea</span>)</span><br>     .select(<span class="hljs-string">&quot;elevation&quot;</span>)<br>     .mean<span class="hljs-literal">()</span><br>     .clip(studyArea);<br><span class="hljs-comment">//DEM数据归一化</span><br>var srtm_band = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SRTM</span>.</span></span>select(&#x27;elevation&#x27;)<br>var srtm_minmax = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SRTM</span>.</span></span>reduce<span class="hljs-constructor">Region(<span class="hljs-params">pie</span>.Reducer.<span class="hljs-params">minMax</span>()</span>, studyArea, <span class="hljs-number">30</span>);<br>srtm_minmax = pie.<span class="hljs-constructor">Dictionary(<span class="hljs-params">srtm_minmax</span>)</span>;<br>var elevation_min = pie.<span class="hljs-constructor">Number(<span class="hljs-params">srtm_minmax</span>.<span class="hljs-params">get</span>(<span class="hljs-string">&quot;elevation_min&quot;</span>)</span>);<br>var elevation_max = pie.<span class="hljs-constructor">Number(<span class="hljs-params">srtm_minmax</span>.<span class="hljs-params">get</span>(<span class="hljs-string">&quot;elevation_max&quot;</span>)</span>);<br>var dem_result = pie.<span class="hljs-constructor">Image(<span class="hljs-params">elevation_max</span>)</span>.subtract(srtm_band).divide(elevation_max.subtract(elevation_min));<br>var vis_DEM = &#123;<br> min:<span class="hljs-number">0</span>,<br> max:<span class="hljs-number">1</span>,<br> palette: <span class="hljs-literal">[&#x27;#BF812D&#x27;, &#x27;#DFC27D&#x27;, &#x27;#F6E8C3&#x27;, &#x27;#A1D99B&#x27;, &#x27;#<span class="hljs-number">41</span>AB5D&#x27;]</span><br>&#125;;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Map</span>.</span></span>add<span class="hljs-constructor">Layer(<span class="hljs-params">dem_result</span>, <span class="hljs-params">vis_DEM</span>, <span class="hljs-string">&quot;dem&quot;</span>, <span class="hljs-params">false</span>)</span>;<br><span class="hljs-comment">//Slope归一化//计算坡度</span><br>var Slope = pie.<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Terrain</span>.</span></span>slope(SRTM).rename(<span class="hljs-string">&quot;slope&quot;</span>);<br>var slope_band = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Slope</span>.</span></span>select(&#x27;slope&#x27;)<br>var slope_minmax = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Slope</span>.</span></span>reduce<span class="hljs-constructor">Region(<span class="hljs-params">pie</span>.Reducer.<span class="hljs-params">minMax</span>()</span>, studyArea, <span class="hljs-number">30</span>);<br>slope_minmax = pie.<span class="hljs-constructor">Dictionary(<span class="hljs-params">slope_minmax</span>)</span>;<br>var slope_min = pie.<span class="hljs-constructor">Number(<span class="hljs-params">slope_minmax</span>.<span class="hljs-params">get</span>(<span class="hljs-string">&quot;slope_min&quot;</span>)</span>);<br>var slope_max = pie.<span class="hljs-constructor">Number(<span class="hljs-params">slope_minmax</span>.<span class="hljs-params">get</span>(<span class="hljs-string">&quot;slope_max&quot;</span>)</span>);<br>var slope_result = pie.<span class="hljs-constructor">Image(<span class="hljs-params">slope_max</span>)</span>.subtract(slope_band).divide(slope_max.subtract(slope_min));<br>var vis_slope = &#123;<br> min:<span class="hljs-number">0</span>,<br> max:<span class="hljs-number">1</span>,<br> palette: <span class="hljs-literal">[&#x27;#C7E9C0&#x27;, &#x27;#F6E8C3&#x27;, &#x27;#DFC27D&#x27;, &#x27;#CD853F&#x27;, &#x27;#BF812D&#x27;]</span><br>&#125;;<br><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">Map</span>.</span></span>add<span class="hljs-constructor">Layer(<span class="hljs-params">slope_result</span>, <span class="hljs-params">vis_slope</span>, <span class="hljs-string">&quot;slope&quot;</span>, <span class="hljs-params">false</span>)</span>;<br></code></pre></td></tr></table></figure><p>湿度代码</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">//湿度</span><br><span class="hljs-function">function <span class="hljs-title">WET</span>(<span class="hljs-params">img,studyArea</span>)</span>&#123;<br>    <span class="hljs-keyword">var</span> B=img.<span class="hljs-keyword">select</span>(<span class="hljs-string">&quot;B2&quot;</span>);<br>    <span class="hljs-keyword">var</span> G=img.<span class="hljs-keyword">select</span>(<span class="hljs-string">&quot;B3&quot;</span>);<br>    <span class="hljs-keyword">var</span> R=img.<span class="hljs-keyword">select</span>(<span class="hljs-string">&quot;B4&quot;</span>);<br>    <span class="hljs-keyword">var</span> NIR=img.<span class="hljs-keyword">select</span>(<span class="hljs-string">&quot;B5&quot;</span>);<br>    <span class="hljs-keyword">var</span> SWIR1=img.<span class="hljs-keyword">select</span>(<span class="hljs-string">&quot;B6&quot;</span>);<br>    <span class="hljs-keyword">var</span> SWIR2=img.<span class="hljs-keyword">select</span>(<span class="hljs-string">&quot;B7&quot;</span>);<br>    <span class="hljs-keyword">var</span> WET=B.multiply(<span class="hljs-number">0.1509</span>).<span class="hljs-keyword">add</span>(G.multiply(<span class="hljs-number">0.1973</span>).<span class="hljs-keyword">add</span>(R.multiply(<span class="hljs-number">0.3279</span>).<span class="hljs-keyword">add</span>(NIR.multiply(<span class="hljs-number">0.3406</span>).<span class="hljs-keyword">add</span>(SWIR1.multiply(<span class="hljs-number">-0.7112</span>).<span class="hljs-keyword">add</span>(SWIR2.multiply(<span class="hljs-number">-0.4572</span>))))))<br>    .rename(<span class="hljs-string">&quot;WET&quot;</span>);<br>  <span class="hljs-comment">//计算区域内WET最大值</span><br>  <span class="hljs-keyword">var</span> WET_max = WET.reduceRegion(pie.Reducer.max(),studyArea, reduceScale).<span class="hljs-keyword">get</span>(<br>    <span class="hljs-string">&quot;WET&quot;</span><br>  );<br>  WET_max = pie.Number(WET_max);<br>  <span class="hljs-comment">//计算区域内WET最小值</span><br>  <span class="hljs-keyword">var</span> WET_min = WET.reduceRegion(pie.Reducer.min(), studyArea, reduceScale).<span class="hljs-keyword">get</span>(<br>    <span class="hljs-string">&quot;WET&quot;</span><br>  );<br>  WET_min = pie.Number(WET_min);<br>  <span class="hljs-keyword">var</span> img_WET = WET.subtract(WET_min).divide(WET_max.subtract(WET_min));<br>  <span class="hljs-keyword">return</span> img_WET;<br> &#125;<br></code></pre></td></tr></table></figure><p>年平均降水量（现在是月平均降水量，之后修改）</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//月平均降水量//想办法转换成年降水量</span><br><span class="hljs-keyword">function</span> <span class="hljs-constructor">TEM(<span class="hljs-params">img</span>,<span class="hljs-params">studyArea</span>)</span>&#123;<br>    var TEM=img.select(<span class="hljs-string">&quot;B1&quot;</span>).rename(<span class="hljs-string">&quot;TEM&quot;</span>);<br>      <span class="hljs-comment">//计算区域内WET最大值</span><br>  var TEM_max = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">TEM</span>.</span></span>reduce<span class="hljs-constructor">Region(<span class="hljs-params">pie</span>.Reducer.<span class="hljs-params">max</span>()</span>,studyArea, reduceScale).get(<br>    <span class="hljs-string">&quot;TEM&quot;</span><br>  );<br>  TEM_max = pie.<span class="hljs-constructor">Number(TEM_max)</span>;<br>  <span class="hljs-comment">//计算区域内WET最小值</span><br>  var TEM_min = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">TEM</span>.</span></span>reduce<span class="hljs-constructor">Region(<span class="hljs-params">pie</span>.Reducer.<span class="hljs-params">min</span>()</span>, studyArea, reduceScale).get(<br>    <span class="hljs-string">&quot;TEM&quot;</span><br>  );<br>  TEM_min = pie.<span class="hljs-constructor">Number(TEM_min)</span>;<br>  var img_TEM = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">TEM</span>.</span></span>subtract(TEM_min).divide(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">TEm_max</span>.</span></span>subtract(TEM_min));<br>  return img_TEM;<br>&#125;<br></code></pre></td></tr></table></figure><p>空气质量</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">var visAQI = &#123;<br>   min: <span class="hljs-number">0</span>,<br>   max: <span class="hljs-number">1</span>,<br>   palette: <span class="hljs-literal">[</span><br><span class="hljs-literal">     &quot;#<span class="hljs-number">040274</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-number">040281</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-number">0502</span><span class="hljs-identifier">a3</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-number">0502</span><span class="hljs-identifier">b8</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-number">0502</span><span class="hljs-identifier">ce</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-number">0502e6</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-number">0602</span><span class="hljs-identifier">ff</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-number">235</span><span class="hljs-identifier">cb1</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-number">307</span><span class="hljs-identifier">ef3</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-number">269</span><span class="hljs-identifier">db1</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-number">30</span><span class="hljs-identifier">c8e2</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-number">32</span><span class="hljs-identifier">d3ef</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-number">3</span><span class="hljs-identifier">be285</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-number">3</span><span class="hljs-identifier">ff38f</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-number">86e26</span><span class="hljs-identifier">f</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-number">3</span><span class="hljs-identifier">ae237</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-identifier">b5e22e</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-identifier">d6e21f</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-identifier">fff705</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-identifier">ffd611</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-identifier">ffb613</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-identifier">ff8b13</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-identifier">ff6e08</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-identifier">ff500d</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-identifier">ff0000</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-identifier">de0101</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-identifier">c21301</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-identifier">a71001</span>&quot;,</span><br><span class="hljs-literal">     &quot;#<span class="hljs-number">911003</span>&quot;,</span><br><span class="hljs-literal">   ]</span>,<br> &#125;;<br>  <span class="hljs-comment">// NO2 去云函数</span><br> <span class="hljs-keyword">function</span> cloud<span class="hljs-constructor">Mask(<span class="hljs-params">image</span>)</span> &#123;<br>   var k = image.update<span class="hljs-constructor">Mask(<span class="hljs-params">image</span>.<span class="hljs-params">select</span>(<span class="hljs-string">&quot;cloud_fraction&quot;</span>)</span>.lt(<span class="hljs-number">0.2</span>));<br>   return k.select(<span class="hljs-string">&quot;tropospheric_NO2_column_number_density&quot;</span>);<br> &#125; <span class="hljs-comment">//NO2 去云</span><br> <br> <span class="hljs-keyword">function</span> normal<span class="hljs-constructor">NO2(<span class="hljs-params">startDate</span>, <span class="hljs-params">endDate</span>, <span class="hljs-params">roi</span>)</span> &#123;<br>   <span class="hljs-comment">//加载对二氧化氮进行监测的近实时数据流产品数据</span><br>   var NO2cOLL = pie<br>     .<span class="hljs-constructor">ImageCollection(<span class="hljs-string">&quot;S5P/OFFL_L3_NO2&quot;</span>)</span><br>     .filter<span class="hljs-constructor">Bounds(<span class="hljs-params">roi</span>)</span><br>     .filter<span class="hljs-constructor">Date(<span class="hljs-params">startDate</span>, <span class="hljs-params">endDate</span>)</span>;<br>   var NO2IMG = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">NO2cOLL</span>.</span></span>select(<span class="hljs-literal">[</span><br><span class="hljs-literal">     &quot;<span class="hljs-identifier">tropospheric_NO2_column_number_density</span>&quot;,</span><br><span class="hljs-literal">     &quot;<span class="hljs-identifier">cloud_fraction</span>&quot;,</span><br><span class="hljs-literal">   ]</span>).map(cloudMask);<br>   NO2IMG = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">NO2IMG</span>.</span></span>mean<span class="hljs-literal">()</span>.clip(roi).rename(<span class="hljs-string">&quot;NO2&quot;</span>);<br>   var NO23_max = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">NO2IMG</span>.</span></span>reduce<span class="hljs-constructor">Region(<span class="hljs-params">pie</span>.Reducer.<span class="hljs-params">max</span>()</span>, roi, <span class="hljs-number">7000</span>).get(<span class="hljs-string">&quot;NO2&quot;</span>);<br>   NO23_max = pie.<span class="hljs-constructor">Number(NO23_max)</span>;<br>   var NO23_min = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">NO2IMG</span>.</span></span>reduce<span class="hljs-constructor">Region(<span class="hljs-params">pie</span>.Reducer.<span class="hljs-params">min</span>()</span>, roi, <span class="hljs-number">7000</span>).get(<span class="hljs-string">&quot;NO2&quot;</span>);<br>   NO23_min = pie.<span class="hljs-constructor">Number(NO23_min)</span>;<br>   var NORNO23 = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">NO2IMG</span>.</span></span>subtract(NO23_min).divide(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">NO23_max</span>.</span></span>subtract(NO23_min));<br>   return NORNO23;<br> &#125;<br> <br> <span class="hljs-comment">// O3 去云函数</span><br> <span class="hljs-keyword">function</span> cloud<span class="hljs-constructor">Mask_O3(<span class="hljs-params">image</span>)</span> &#123;<br>   var k = image.update<span class="hljs-constructor">Mask(<span class="hljs-params">image</span>.<span class="hljs-params">select</span>(<span class="hljs-string">&quot;cloud_fraction&quot;</span>)</span>.lt(<span class="hljs-number">0.2</span>));<br>   return k.select(<span class="hljs-string">&quot;O3_column_number_density&quot;</span>);<br> &#125;<br> <span class="hljs-keyword">function</span> normal<span class="hljs-constructor">O3(<span class="hljs-params">startDate</span>, <span class="hljs-params">endDate</span>, <span class="hljs-params">roi</span>)</span> &#123;<br>   var O3 = pie<br>     .<span class="hljs-constructor">ImageCollection(<span class="hljs-string">&quot;S5P/OFFL_L3_O3&quot;</span>)</span><br>     .filter<span class="hljs-constructor">Bounds(<span class="hljs-params">roi</span>)</span><br>     .filter<span class="hljs-constructor">Date(<span class="hljs-params">startDate</span>, <span class="hljs-params">endDate</span>)</span>;<br>   var O33 = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">O3</span>.</span></span>select(<span class="hljs-literal">[&quot;O3<span class="hljs-identifier">_column_number_density</span>&quot;, &quot;<span class="hljs-identifier">cloud_fraction</span>&quot;]</span>)<br>     .map(cloudMask_O3)<br>     .mean<span class="hljs-literal">()</span><br>     .clip(roi)<br>     .rename(<span class="hljs-string">&quot;O3&quot;</span>);<br>   var O33_max = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">O33</span>.</span></span>reduce<span class="hljs-constructor">Region(<span class="hljs-params">pie</span>.Reducer.<span class="hljs-params">max</span>()</span>, roi, <span class="hljs-number">7500</span>).get(<span class="hljs-string">&quot;O3&quot;</span>);<br>   O33_max = pie.<span class="hljs-constructor">Number(O33_max)</span>;<br>   var O33_min = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">O33</span>.</span></span>reduce<span class="hljs-constructor">Region(<span class="hljs-params">pie</span>.Reducer.<span class="hljs-params">min</span>()</span>, roi, <span class="hljs-number">7500</span>).get(<span class="hljs-string">&quot;O3&quot;</span>);<br>   O33_min = pie.<span class="hljs-constructor">Number(O33_min)</span>;<br>   var NORO33 = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">O33</span>.</span></span>subtract(O33_min).divide(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">O33_max</span>.</span></span>subtract(O33_min));<br>   return NORO33;<br> &#125;<br> <br> <span class="hljs-comment">//SO2 去云</span><br> <span class="hljs-keyword">function</span> cloud<span class="hljs-constructor">Mask_SO2(<span class="hljs-params">image</span>)</span> &#123;<br>   var k = image.update<span class="hljs-constructor">Mask(<span class="hljs-params">image</span>.<span class="hljs-params">select</span>(<span class="hljs-string">&quot;cloud_fraction&quot;</span>)</span>.lt(<span class="hljs-number">0.2</span>));<br>   return k.select(<span class="hljs-string">&quot;SO2_column_number_density&quot;</span>);<br> &#125;<br> <span class="hljs-keyword">function</span> normal<span class="hljs-constructor">SO2(<span class="hljs-params">startDate</span>, <span class="hljs-params">endDate</span>, <span class="hljs-params">roi</span>)</span> &#123;<br>   var SO2 = pie<br>     .<span class="hljs-constructor">ImageCollection(<span class="hljs-string">&quot;S5P/OFFL_L3_SO2&quot;</span>)</span><br>     .filter<span class="hljs-constructor">Bounds(<span class="hljs-params">roi</span>)</span><br>     .filter<span class="hljs-constructor">Date(<span class="hljs-params">startDate</span>, <span class="hljs-params">endDate</span>)</span>;<br>   var SO23 = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SO2</span>.</span></span>select(<span class="hljs-literal">[&quot;SO2<span class="hljs-identifier">_column_number_density</span>&quot;, &quot;<span class="hljs-identifier">cloud_fraction</span>&quot;]</span>)<br>     .map(cloudMask_SO2)<br>     .mean<span class="hljs-literal">()</span><br>     .clip(roi)<br>     .rename(<span class="hljs-string">&quot;SO2&quot;</span>);<br>   var SO23_max = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SO23</span>.</span></span>reduce<span class="hljs-constructor">Region(<span class="hljs-params">pie</span>.Reducer.<span class="hljs-params">max</span>()</span>, roi, <span class="hljs-number">7500</span>).get(<span class="hljs-string">&quot;SO2&quot;</span>);<br>   SO23_max = pie.<span class="hljs-constructor">Number(SO23_max)</span>;<br>   var SO23_min = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SO23</span>.</span></span>reduce<span class="hljs-constructor">Region(<span class="hljs-params">pie</span>.Reducer.<span class="hljs-params">min</span>()</span>, roi, <span class="hljs-number">7500</span>).get(<span class="hljs-string">&quot;SO2&quot;</span>);<br>   SO23_min = pie.<span class="hljs-constructor">Number(SO23_min)</span>;<br> <br>   <span class="hljs-comment">//归一化</span><br>   var NORSO23 = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SO23</span>.</span></span>subtract(SO23_min).divide(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">SO23_max</span>.</span></span>subtract(SO23_min));<br>   <span class="hljs-comment">//加载春季SO2影像</span><br>   return NORSO23;<br> &#125;<br> <br> <span class="hljs-comment">//CO 指标归一化 唯一一个没有执行去云操作的？</span><br> <span class="hljs-keyword">function</span> normal<span class="hljs-constructor">CO(<span class="hljs-params">startDate</span>, <span class="hljs-params">endDate</span>, <span class="hljs-params">roi</span>)</span> &#123;<br>   var CO3 = pie<br>     .<span class="hljs-constructor">ImageCollection(<span class="hljs-string">&quot;S5P/OFFL_L3_CO&quot;</span>)</span><br>     .filter<span class="hljs-constructor">Bounds(<span class="hljs-params">roi</span>)</span><br>     .filter<span class="hljs-constructor">Date(<span class="hljs-params">startDate</span>, <span class="hljs-params">endDate</span>)</span><br>     .select(<span class="hljs-string">&quot;CO_column_number_density&quot;</span>)<br>     .mean<span class="hljs-literal">()</span><br>     .clip(roi)<br>     .rename(<span class="hljs-string">&quot;CO&quot;</span>);<br>   var CO3_max = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">CO3</span>.</span></span>reduce<span class="hljs-constructor">Region(<span class="hljs-params">pie</span>.Reducer.<span class="hljs-params">max</span>()</span>, roi, <span class="hljs-number">7500</span>).get(<span class="hljs-string">&quot;CO&quot;</span>);<br>   CO3_max = pie.<span class="hljs-constructor">Number(CO3_max)</span>;<br>   var CO3_min = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">CO3</span>.</span></span>reduce<span class="hljs-constructor">Region(<span class="hljs-params">pie</span>.Reducer.<span class="hljs-params">min</span>()</span>, roi, <span class="hljs-number">7500</span>).get(<span class="hljs-string">&quot;CO&quot;</span>);<br>   CO3_min = pie.<span class="hljs-constructor">Number(CO3_min)</span>;<br>   var NORCO3 = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">CO3</span>.</span></span>subtract(CO3_min).divide(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">CO3_max</span>.</span></span>subtract(CO3_min));<br>   return NORCO3;<br> &#125;<br> <span class="hljs-comment">//计算空气质量，AQI空气质量指数</span><br> <span class="hljs-keyword">function</span> normal<span class="hljs-constructor">AQI(<span class="hljs-params">startDate</span>, <span class="hljs-params">endDate</span>, <span class="hljs-params">roi</span>)</span> &#123;<br>   var co = normal<span class="hljs-constructor">CO(<span class="hljs-params">startDate</span>, <span class="hljs-params">endDate</span>, <span class="hljs-params">roi</span>)</span>;<br>   var so2 = normal<span class="hljs-constructor">SO2(<span class="hljs-params">startDate</span>, <span class="hljs-params">endDate</span>, <span class="hljs-params">roi</span>)</span>;<br>   var o3 = normal<span class="hljs-constructor">O3(<span class="hljs-params">startDate</span>, <span class="hljs-params">endDate</span>, <span class="hljs-params">roi</span>)</span>;<br>   var no2 = normal<span class="hljs-constructor">NO2(<span class="hljs-params">startDate</span>, <span class="hljs-params">endDate</span>, <span class="hljs-params">roi</span>)</span>;<br>   var AQI5 = no2<br>     .multiply(<span class="hljs-number">0.25</span>)<br>     .add(o3.multiply(<span class="hljs-number">0.25</span>))<br>     .add(so2.multiply(<span class="hljs-number">0.25</span>))<br>     .add(co.multiply(<span class="hljs-number">0.25</span>))<br>     .rename(<span class="hljs-string">&quot;AQI5&quot;</span>);<br>   <span class="hljs-comment">//计算最大值最小值</span><br>   var AQI5_max = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">AQI5</span>.</span></span>reduce<span class="hljs-constructor">Region(<span class="hljs-params">pie</span>.Reducer.<span class="hljs-params">max</span>()</span>, roi, <span class="hljs-number">7500</span>).get(<span class="hljs-string">&quot;AQI5&quot;</span>);<br>   AQI5_max = pie.<span class="hljs-constructor">Number(AQI5_max)</span>;<br>   var AQI5_min = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">AQI5</span>.</span></span>reduce<span class="hljs-constructor">Region(<span class="hljs-params">pie</span>.Reducer.<span class="hljs-params">min</span>()</span>, roi, <span class="hljs-number">7500</span>).get(<span class="hljs-string">&quot;AQI5&quot;</span>);<br>   AQI5_min = pie.<span class="hljs-constructor">Number(AQI5_min)</span>;<br>   <span class="hljs-comment">//归一化</span><br>   var NORAQI5 = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">AQI5</span>.</span></span>subtract(AQI5_min)<br>     .divide(<span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">AQI5_max</span>.</span></span>subtract(AQI5_min))<br>     .rename(<span class="hljs-string">&quot;NORAQI5&quot;</span>);<br>   <span class="hljs-comment">//加载夏季AQI影像</span><br>   return NORAQI5;<br> &#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>遥感</category>
      
    </categories>
    
    
    <tags>
      
      <tag>PIE</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
